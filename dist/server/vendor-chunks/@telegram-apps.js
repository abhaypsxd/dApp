"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
exports.id = "vendor-chunks/@telegram-apps";
exports.ids = ["vendor-chunks/@telegram-apps"];
exports.modules = {

/***/ "(ssr)/./node_modules/@telegram-apps/bridge/dist/index.js":
/*!**********************************************************!*\
  !*** ./node_modules/@telegram-apps/bridge/dist/index.js ***!
  \**********************************************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   $debug: () => (/* binding */ ae),\n/* harmony export */   $targetOrigin: () => (/* binding */ ue),\n/* harmony export */   CancelablePromise: () => (/* binding */ w),\n/* harmony export */   ERR_ABORTED: () => (/* binding */ ne),\n/* harmony export */   ERR_CANCELED: () => (/* binding */ re),\n/* harmony export */   ERR_CUSTOM_METHOD_ERR_RESPONSE: () => (/* binding */ Ke),\n/* harmony export */   ERR_METHOD_PARAMETER_UNSUPPORTED: () => (/* binding */ Ge),\n/* harmony export */   ERR_METHOD_UNSUPPORTED: () => (/* binding */ Be),\n/* harmony export */   ERR_RETRIEVE_LP_FAILED: () => (/* binding */ He),\n/* harmony export */   ERR_TIMED_OUT: () => (/* binding */ oe),\n/* harmony export */   ERR_UNKNOWN_ENV: () => (/* binding */ Ve),\n/* harmony export */   EnhancedPromise: () => (/* binding */ A),\n/* harmony export */   TypedError: () => (/* binding */ b),\n/* harmony export */   addEventListener: () => (/* binding */ x),\n/* harmony export */   camelToKebab: () => (/* binding */ ct),\n/* harmony export */   camelToSnake: () => (/* binding */ ut),\n/* harmony export */   captureSameReq: () => (/* binding */ tt),\n/* harmony export */   compareVersions: () => (/* binding */ nt),\n/* harmony export */   createAbortError: () => (/* binding */ M),\n/* harmony export */   createCbCollector: () => (/* binding */ L),\n/* harmony export */   createLogger: () => (/* binding */ Oe),\n/* harmony export */   createPostEvent: () => (/* binding */ Et),\n/* harmony export */   createTypedErrorPredicate: () => (/* binding */ O),\n/* harmony export */   defineEventHandlers: () => (/* binding */ gt),\n/* harmony export */   deleteCssVar: () => (/* binding */ lt),\n/* harmony export */   emitMiniAppsEvent: () => (/* binding */ k),\n/* harmony export */   getStorageValue: () => (/* binding */ Le),\n/* harmony export */   hasWebviewProxy: () => (/* binding */ ee),\n/* harmony export */   invokeCustomMethod: () => (/* binding */ yt),\n/* harmony export */   isAbortError: () => (/* binding */ st),\n/* harmony export */   isCanceledError: () => (/* binding */ at),\n/* harmony export */   isIframe: () => (/* binding */ De),\n/* harmony export */   isTMA: () => (/* binding */ _t),\n/* harmony export */   isTimeoutError: () => (/* binding */ ot),\n/* harmony export */   mockTelegramEnv: () => (/* binding */ bt),\n/* harmony export */   off: () => (/* binding */ ht),\n/* harmony export */   on: () => (/* binding */ Je),\n/* harmony export */   postEvent: () => (/* binding */ pe),\n/* harmony export */   removeEventHandlers: () => (/* binding */ wt),\n/* harmony export */   request: () => (/* binding */ fe),\n/* harmony export */   resetPackageState: () => (/* binding */ vt),\n/* harmony export */   retrieveLaunchParams: () => (/* binding */ Qe),\n/* harmony export */   setCssVar: () => (/* binding */ ft),\n/* harmony export */   setStorageValue: () => (/* binding */ ke),\n/* harmony export */   sleep: () => (/* binding */ it),\n/* harmony export */   snakeToCamel: () => (/* binding */ pt),\n/* harmony export */   subscribe: () => (/* binding */ dt),\n/* harmony export */   supports: () => (/* binding */ B),\n/* harmony export */   unsubscribe: () => (/* binding */ mt)\n/* harmony export */ });\nlet v = class H extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, H.prototype);\n  }\n};\nfunction G(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction we(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\nconst he = \"ERR_INVALID_VALUE\", de = \"ERR_UNEXPECTED_VALUE\", me = \"ERR_UNEXPECTED_TYPE\", V = \"ERR_PARSE\";\nfunction K(e, t) {\n  const n = {};\n  for (const r in e) {\n    const o = e[r];\n    if (!o)\n      continue;\n    let s, a;\n    typeof o == \"function\" ? (s = r, a = o) : [s, a] = o;\n    try {\n      const i = a(t(s));\n      i !== void 0 && (n[r] = i);\n    } catch (i) {\n      throw new v(\n        V,\n        `Parser for \"${r}\" property failed${s === r ? \"\" : `. Source field: \"${s}\"`}`,\n        i\n      );\n    }\n  }\n  return n;\n}\nfunction Z(e) {\n  let t = e;\n  if (typeof t == \"string\")\n    try {\n      t = JSON.parse(t);\n    } catch (n) {\n      throw new v(he, { cause: n });\n    }\n  if (typeof t != \"object\" || !t || Array.isArray(t))\n    throw new v(de);\n  return t;\n}\nfunction g(e, t) {\n  return (n) => {\n    const r = (o) => {\n      if (!(n && o === void 0))\n        try {\n          return t(o);\n        } catch (s) {\n          throw new v(V, {\n            message: `\"${e}\" transformer failed to parse the value`,\n            cause: s\n          });\n        }\n    };\n    return /* @__PURE__ */ Object.assign(\n      r,\n      {\n        isValid(o) {\n          try {\n            return r(o), !0;\n          } catch {\n            return !1;\n          }\n        }\n      }\n    );\n  };\n}\nfunction _(e, t) {\n  return g(t || \"object\", (n) => {\n    const r = Z(n);\n    return K(e, (o) => r[o]);\n  });\n}\nfunction R(e) {\n  throw new v(me, `Unexpected value received: ${JSON.stringify(e)}`);\n}\nconst $ = g(\"boolean\", (e) => {\n  if (typeof e == \"boolean\")\n    return e;\n  const t = String(e);\n  if (t === \"1\" || t === \"true\")\n    return !0;\n  if (t === \"0\" || t === \"false\")\n    return !1;\n  R(e);\n}), l = g(\"string\", (e) => {\n  if (typeof e == \"string\" || typeof e == \"number\")\n    return e.toString();\n  R(e);\n}), P = g(\"number\", (e) => {\n  if (typeof e == \"number\")\n    return e;\n  if (typeof e == \"string\") {\n    const t = Number(e);\n    if (!Number.isNaN(t))\n      return t;\n  }\n  R(e);\n}), Ee = g(\"date\", (e) => e instanceof Date ? e : new Date(P()(e) * 1e3));\nfunction z(e, t) {\n  return g(t || \"searchParams\", (n) => {\n    typeof n != \"string\" && !(n instanceof URLSearchParams) && R(n);\n    const r = typeof n == \"string\" ? new URLSearchParams(n) : n;\n    return K(e, (o) => {\n      const s = r.get(o);\n      return s === null ? void 0 : s;\n    });\n  });\n}\nfunction U(e) {\n  for (const t in e)\n    e[t] = [G(t), e[t]];\n  return e;\n}\nconst ye = (e) => {\n  const t = P(), n = P(!0), r = l(), o = l(!0), s = $(!0), a = _(U({\n    addedToAttachmentMenu: s,\n    allowsWriteToPm: s,\n    firstName: r,\n    id: t,\n    isBot: s,\n    isPremium: s,\n    languageCode: o,\n    lastName: o,\n    photoUrl: o,\n    username: o\n  }), \"User\")(!0);\n  return z(\n    U({\n      authDate: Ee(),\n      canSendAfter: n,\n      chat: _(\n        U({\n          id: t,\n          type: r,\n          title: r,\n          photoUrl: o,\n          username: o\n        }),\n        \"Chat\"\n      )(!0),\n      chatInstance: o,\n      chatType: o,\n      hash: r,\n      queryId: o,\n      receiver: a,\n      startParam: o,\n      user: a\n    }),\n    \"initData\"\n  )(e);\n};\nfunction ve(e) {\n  return /^#[\\da-f]{6}$/i.test(e);\n}\nfunction Pe(e) {\n  return /^#[\\da-f]{3}$/i.test(e);\n}\nfunction Re(e) {\n  const t = e.replace(/\\s/g, \"\").toLowerCase();\n  if (ve(t))\n    return t;\n  if (Pe(t)) {\n    let r = \"#\";\n    for (let o = 0; o < 3; o += 1)\n      r += t[1 + o].repeat(2);\n    return r;\n  }\n  const n = t.match(/^rgb\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3})\\)$/) || t.match(/^rgba\\((\\d{1,3}),(\\d{1,3}),(\\d{1,3}),\\d{1,3}\\)$/);\n  if (!n)\n    throw new Error(`Value \"${e}\" does not satisfy any of known RGB formats.`);\n  return n.slice(1).reduce((r, o) => {\n    const s = parseInt(o, 10).toString(16);\n    return r + (s.length === 1 ? \"0\" : \"\") + s;\n  }, \"#\");\n}\nconst Te = g(\"rgb\", (e) => Re(l()(e))), Se = g(\n  \"themeParams\",\n  (e) => {\n    const t = Te(!0);\n    return Object.entries(Z(e)).reduce((n, [r, o]) => (n[we(r)] = t(o), n), {});\n  }\n);\n// @__NO_SIDE_EFFECTS__\nfunction X(e) {\n  return JSON.stringify(\n    Object.fromEntries(\n      Object.entries(e).map(([t, n]) => [G(t), n])\n    )\n  );\n}\nconst Ae = (e) => {\n  const t = l(), n = l(!0), r = $(!0);\n  return z({\n    botInline: [\"tgWebAppBotInline\", r],\n    initData: [\"tgWebAppData\", ye(!0)],\n    initDataRaw: [\"tgWebAppData\", n],\n    platform: [\"tgWebAppPlatform\", t],\n    showSettings: [\"tgWebAppShowSettings\", r],\n    startParam: [\"tgWebAppStartParam\", n],\n    themeParams: [\"tgWebAppThemeParams\", Se()],\n    version: [\"tgWebAppVersion\", t]\n  }, \"launchParams\")(e);\n};\n// @__NO_SIDE_EFFECTS__\nfunction $e(e) {\n  const { initDataRaw: t, startParam: n, showSettings: r, botInline: o } = e, s = new URLSearchParams();\n  return s.set(\"tgWebAppPlatform\", e.platform), s.set(\"tgWebAppThemeParams\", /* @__PURE__ */ X(e.themeParams)), s.set(\"tgWebAppVersion\", e.version), t && s.set(\"tgWebAppData\", t), n && s.set(\"tgWebAppStartParam\", n), typeof r == \"boolean\" && s.set(\"tgWebAppShowSettings\", r ? \"1\" : \"0\"), typeof o == \"boolean\" && s.set(\"tgWebAppBotInline\", o ? \"1\" : \"0\"), s.toString();\n}\nconst Y = _({\n  eventType: l(),\n  eventData: (e) => e\n}, \"miniAppsMessage\"), Q = g(\"fn\", (e) => {\n  if (typeof e == \"function\")\n    return e;\n  R(e);\n});\nfunction Ne(e) {\n  return !!e && typeof e == \"object\" && !Array.isArray(e);\n}\nconst Ce = _({\n  TelegramWebviewProxy: _({ postEvent: Q() })()\n});\nfunction ee(e) {\n  return Ce().isValid(e);\n}\nfunction De() {\n  try {\n    return window.self !== window.top;\n  } catch {\n    return !0;\n  }\n}\nvar Ue = Object.defineProperty, je = (e, t, n) => t in e ? Ue(e, t, { enumerable: !0, configurable: !0, writable: !0, value: n }) : e[t] = n, te = (e, t, n) => je(e, typeof t != \"symbol\" ? t + \"\" : t, n);\nclass b extends Error {\n  constructor(t, n, r) {\n    super(\n      typeof n == \"object\" ? n.message : n || t,\n      {\n        cause: typeof n == \"object\" ? n.cause : r\n      }\n    ), this.type = t, Object.setPrototypeOf(this, b.prototype);\n  }\n}\nfunction x(e, t, n) {\n  return e.addEventListener(t, n), () => e.removeEventListener(t, n);\n}\nfunction L(...e) {\n  const t = e.flat(1);\n  return [\n    t.push.bind(t),\n    () => {\n      t.forEach((n) => {\n        n();\n      });\n    }\n  ];\n}\nfunction xe(e, t) {\n  return e instanceof b && e.type === t;\n}\nfunction O(e) {\n  return (t) => xe(t, e);\n}\nconst ne = \"ERR_ABORTED\", re = \"ERR_CANCELED\", oe = \"ERR_TIMED_OUT\";\nfunction M(e) {\n  return new b(ne, { cause: e });\n}\nconst ot = O(oe), st = O(ne), at = O(re);\nfunction q(e, t) {\n  return e.reject = t.reject, e;\n}\nclass w extends Promise {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s, a;\n    super((i, c) => {\n      o || (o = {});\n      const { abortSignal: u } = o;\n      if (u && u.aborted)\n        return c(M(u.reason));\n      const [f, h] = L(), d = (m) => (...ge) => (h(), m(...ge)), T = new AbortController(), { signal: S } = T;\n      a = d((m) => {\n        T.abort(m), c(m);\n      }), s = d(i), u && f(\n        x(u, \"abort\", () => {\n          a(M(u.reason));\n        })\n      );\n      const { timeout: D } = o;\n      if (D) {\n        const m = setTimeout(() => {\n          a(new b(oe, `Timeout reached: ${D}ms`));\n        }, D);\n        f(() => {\n          clearTimeout(m);\n        });\n      }\n      r && r(s, a, S);\n    }), te(this, \"reject\"), this.reject = a;\n  }\n  /**\n   * Creates a new BetterPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new w((r, o, s) => {\n      try {\n        const a = t(s);\n        return a instanceof Promise ? a.then(r, o) : r(a);\n      } catch (a) {\n        o(a);\n      }\n    }, n);\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new w((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new w((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * Cancels the promise execution.\n   */\n  cancel() {\n    this.reject(new b(re));\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return q(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return q(super.then(t, n), this);\n  }\n}\nfunction F(e, t) {\n  return e.resolve = t.resolve, e;\n}\nclass A extends w {\n  constructor(t, n) {\n    let r, o;\n    typeof t == \"function\" ? (r = t, o = n) : o = t;\n    let s;\n    super((a, i, c) => {\n      s = a, r && r(a, i, c);\n    }, o), te(this, \"resolve\"), this.resolve = s;\n  }\n  /**\n   * Creates a new EnhancedPromise instance using executor, resolving promise when a result\n   * was returned.\n   * @param fn - function returning promise result.\n   * @param options - additional options.\n   */\n  static withFn(t, n) {\n    return new A(\n      (r, o, s) => w.withFn(t, { abortSignal: s }).then(r, o),\n      n\n    );\n  }\n  /**\n   * @see Promise.resolve\n   */\n  static resolve(t) {\n    return new A((n) => {\n      n(t);\n    });\n  }\n  /**\n   * @see Promise.reject\n   */\n  static reject(t) {\n    return new A((n, r) => {\n      r(t);\n    });\n  }\n  /**\n   * @see Promise.catch\n   */\n  catch(t) {\n    return this.then(void 0, t);\n  }\n  /**\n   * @see Promise.finally\n   */\n  finally(t) {\n    return F(super.finally(t), this);\n  }\n  /**\n   * @see Promise.then\n   */\n  then(t, n) {\n    return F(super.then(t, n), this);\n  }\n}\nfunction it(e, t) {\n  return new w((n) => {\n    setTimeout(n, e);\n  }, { abortSignal: t });\n}\nfunction se(e) {\n  return `tapps/${e}`;\n}\nfunction ke(e, t) {\n  sessionStorage.setItem(se(e), JSON.stringify(t));\n}\nfunction Le(e) {\n  const t = sessionStorage.getItem(se(e));\n  try {\n    return t ? JSON.parse(t) : void 0;\n  } catch {\n  }\n}\nfunction ct(e) {\n  return e.replace(/[A-Z]/g, (t) => `-${t.toLowerCase()}`);\n}\nfunction ut(e) {\n  return e.replace(/[A-Z]/g, (t) => `_${t.toLowerCase()}`);\n}\nfunction pt(e) {\n  return e.replace(/_[a-z]/g, (t) => t[1].toUpperCase());\n}\n// @__NO_SIDE_EFFECTS__\nfunction Oe(e, t) {\n  t || (t = {});\n  const {\n    textColor: n,\n    bgColor: r,\n    shouldLog: o = !0\n  } = t;\n  function s(a, ...i) {\n    if (!o || typeof o == \"function\" && !o())\n      return;\n    const c = \"font-weight:bold;padding:0 5px;border-radius:5px\";\n    console[a](\n      `%c${Intl.DateTimeFormat(\"en-GB\", {\n        hour: \"2-digit\",\n        minute: \"2-digit\",\n        second: \"2-digit\",\n        fractionalSecondDigits: 3,\n        timeZone: \"UTC\"\n      }).format(/* @__PURE__ */ new Date())}%c / %c${e}`,\n      `${c};background-color: lightblue;color:black`,\n      \"\",\n      `${c};${n ? `color:${n};` : \"\"}${r ? `background-color:${r}` : \"\"}`,\n      ...i\n    );\n  }\n  return [\n    function(...a) {\n      s(\"log\", ...a);\n    },\n    function(...a) {\n      s(\"error\", ...a);\n    }\n  ];\n}\nfunction ft(e, t) {\n  document.documentElement.style.setProperty(e, t);\n}\nfunction lt(e) {\n  document.documentElement.style.removeProperty(e);\n}\nfunction We(e, t) {\n  t();\n}\n// @__NO_SIDE_EFFECTS__\nfunction E(e, t) {\n  t || (t = {});\n  const n = t.equals || Object.is;\n  let r = [], o = e;\n  const s = (u) => {\n    if (!n(o, u)) {\n      const f = o;\n      o = u, We(c, () => {\n        [...r].forEach(([h, d]) => {\n          h(u, f), d && i(h, !0);\n        });\n      });\n    }\n  };\n  function a(u) {\n    const f = typeof u != \"object\" ? { once: u } : u;\n    return {\n      once: f.once || !1,\n      signal: f.signal || !1\n    };\n  }\n  const i = (u, f) => {\n    const h = a(f), d = r.findIndex(([T, S]) => T === u && S.once === h.once && S.signal === h.signal);\n    d >= 0 && r.splice(d, 1);\n  }, c = Object.assign(\n    function() {\n      return Ie(c), o;\n    },\n    {\n      destroy() {\n        r = [];\n      },\n      set: s,\n      reset() {\n        s(e);\n      },\n      sub(u, f) {\n        return r.push([u, a(f)]), () => i(u, f);\n      },\n      unsub: i,\n      unsubAll() {\n        r = r.filter((u) => u[1].signal);\n      }\n    }\n  );\n  return c;\n}\nconst j = [];\nfunction Ie(e) {\n  j.length && j[j.length - 1].add(e);\n}\nconst ae = /* @__PURE__ */ E(!1), [W, Me] = /* @__PURE__ */ Oe(\"Bridge\", {\n  bgColor: \"#9147ff\",\n  textColor: \"white\",\n  shouldLog: ae\n}), qe = {\n  clipboard_text_received: _({\n    req_id: l(),\n    data: (e) => e === null ? e : l(!0)(e)\n  }, \"clipboard_text_received\"),\n  custom_method_invoked: _({\n    req_id: l(),\n    result: (e) => e,\n    error: l(!0)\n  }, \"custom_method_invoked\"),\n  popup_closed: g(\"popup_closed\", (e) => e ? _({\n    button_id: (t) => t == null ? void 0 : l()(t)\n  })()(e) : {}),\n  viewport_changed: _({\n    height: P(),\n    width: (e) => e == null ? window.innerWidth : P()(e),\n    is_state_stable: $(),\n    is_expanded: $()\n  }, \"viewport_changed\")\n};\nfunction Fe(e) {\n  const t = window, [, n] = L(\n    // Add \"resize\" event listener to make sure, we always have fresh viewport information.\n    // The desktop version of Telegram is sometimes not sending the \"viewport_changed\"\n    // event. For example, when the Main Button is shown. That's why we should\n    // add our own listener to make sure viewport information is always fresh.\n    // Issue: https://github.com/Telegram-Mini-Apps/telegram-apps/issues/10\n    x(t, \"resize\", () => {\n      e([\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      }]);\n    }),\n    // Add listener, which handles events sent from the Telegram web application and also events\n    // generated by the local emitEvent function.\n    x(t, \"message\", (r) => {\n      if (r.source !== t.parent)\n        return;\n      let o;\n      try {\n        o = Y()(r.data);\n      } catch {\n        return;\n      }\n      const { eventType: s, eventData: a } = o, i = qe[s];\n      try {\n        const c = i ? i()(a) : a;\n        W(\"Event received:\", c ? { eventType: s, eventData: c } : { eventType: s }), e([s, c]);\n      } catch (c) {\n        Me(\n          [\n            `An error occurred processing the \"${s}\" event from the Telegram application.`,\n            \"Please, file an issue here:\",\n            \"https://github.com/Telegram-Mini-Apps/telegram-apps/issues/new/choose\"\n          ].join(`\n`),\n          o,\n          c\n        );\n      }\n    })\n  );\n  return n;\n}\nconst N = /* @__PURE__ */ E(), C = /* @__PURE__ */ E();\nfunction ie() {\n  return C() || C.set(Fe(N.set)), N;\n}\nconst y = /* @__PURE__ */ E({});\nfunction ce(e) {\n  let t = y()[e];\n  return t || (t = /* @__PURE__ */ E(void 0, {\n    equals() {\n      return !1;\n    }\n  }), ie().sub((n) => {\n    n && n[0] === e && t.set(n[1]);\n  }), y.set({ ...y(), [e]: t })), t;\n}\nfunction Je(e, t, n) {\n  return ce(e).sub(t, n);\n}\nconst Be = \"ERR_METHOD_UNSUPPORTED\", He = \"ERR_RETRIEVE_LP_FAILED\", Ge = \"ERR_METHOD_PARAMETER_UNSUPPORTED\", Ve = \"ERR_UNKNOWN_ENV\", Ke = \"ERR_INVOKE_CUSTOM_METHOD_RESPONSE\", ue = /* @__PURE__ */ E(\"https://web.telegram.org\");\nfunction pe(e, t) {\n  W(\"Posting event:\", t ? { eventType: e, eventData: t } : { eventType: e });\n  const n = window;\n  if (ee(n)) {\n    n.TelegramWebviewProxy.postEvent(e, JSON.stringify(t));\n    return;\n  }\n  const r = JSON.stringify({ eventType: e, eventData: t });\n  if (De())\n    return n.parent.postMessage(r, ue());\n  const { external: o } = n;\n  if (_({ notify: Q() })().isValid(o)) {\n    o.notify(r);\n    return;\n  }\n  throw new b(Ve);\n}\nfunction fe(e, t, n) {\n  n || (n = {});\n  const { capture: r } = n, [o, s] = L();\n  return new w((a) => {\n    (Array.isArray(t) ? t : [t]).forEach((i) => {\n      o(\n        Je(i, (c) => {\n          (!r || (Array.isArray(t) ? r({\n            event: i,\n            payload: c\n          }) : r(c))) && a(c);\n        })\n      );\n    }), (n.postEvent || pe)(e, n.params);\n  }, n).finally(s);\n}\nfunction I(e) {\n  return Ae()(e);\n}\nfunction le(e) {\n  return I(\n    e.replace(/^[^?#]*[?#]/, \"\").replace(/[?#]/g, \"&\")\n  );\n}\nfunction Ze() {\n  return le(window.location.href);\n}\nfunction ze() {\n  const e = performance.getEntriesByType(\"navigation\")[0];\n  if (!e)\n    throw new Error(\"Unable to get first navigation entry.\");\n  return le(e.name);\n}\nconst Xe = \"launchParams\";\nfunction Ye() {\n  return I(Le(Xe) || \"\");\n}\nfunction _e(e) {\n  ke(\"launchParams\", /* @__PURE__ */ $e(e));\n}\nfunction be(e) {\n  return e instanceof Error ? e.message + (e.cause ? `\n  ${be(e.cause)}` : \"\") : JSON.stringify(e);\n}\nfunction Qe() {\n  const e = [];\n  for (const t of [\n    // Try to retrieve launch parameters from the current location. This method can return\n    // nothing in case, location was changed, and then the page was reloaded.\n    Ze,\n    // Then, try using the lower level API - window.performance.\n    ze,\n    // Finally, try to extract launch parameters from the session storage.\n    Ye\n  ])\n    try {\n      const n = t();\n      return _e(n), n;\n    } catch (n) {\n      e.push(n);\n    }\n  throw new b(He, [\n    \"Unable to retrieve launch parameters from any known source. Perhaps, you have opened your app outside Telegram?\",\n    \"📖 Refer to docs for more information:\",\n    \"https://docs.telegram-mini-apps.com/packages/telegram-apps-sdk/environment\",\n    \"Collected errors:\",\n    ...e.map((t) => `— ${be(t)}`)\n  ].join(`\n`));\n}\nfunction _t(e) {\n  if (e === \"simple\")\n    try {\n      return Qe(), !0;\n    } catch {\n      return !1;\n    }\n  return w.withFn(async () => {\n    if (ee(window))\n      return !0;\n    try {\n      return await fe(\"web_app_request_theme\", \"theme_changed\", { timeout: 100 }), !0;\n    } catch {\n      return !1;\n    }\n  }, e);\n}\nfunction k(e, t) {\n  window.dispatchEvent(new MessageEvent(\"message\", {\n    data: JSON.stringify({ eventType: e, eventData: t }),\n    // We specify window.parent to imitate the case, the parent iframe sent us this event.\n    source: window.parent\n  }));\n}\nfunction et(e, t) {\n  if (typeof t == \"string\")\n    try {\n      const { eventType: n } = Y()(t);\n      n === \"web_app_request_theme\" && k(\"theme_changed\", {\n        theme_params: JSON.parse(/* @__PURE__ */ X(e))\n      }), n === \"web_app_request_viewport\" && k(\"viewport_changed\", {\n        width: window.innerWidth,\n        height: window.innerHeight,\n        is_state_stable: !0,\n        is_expanded: !0\n      });\n    } catch {\n    }\n}\nfunction bt(e) {\n  var r;\n  const t = typeof e == \"string\" ? I(e) : e;\n  _e(t);\n  const n = (r = window.TelegramWebviewProxy) == null ? void 0 : r.postEvent;\n  window.TelegramWebviewProxy = {\n    postEvent(o, s) {\n      et(t.themeParams, JSON.stringify({ eventType: o, eventData: s })), n == null || n(o, s);\n    }\n  }, W(\"Environment was mocked by the mockTelegramEnv function\");\n}\nfunction gt() {\n  [\n    [\"TelegramGameProxy_receiveEvent\"],\n    // Windows Phone.\n    [\"TelegramGameProxy\", \"receiveEvent\"],\n    // Desktop.\n    [\"Telegram\", \"WebView\", \"receiveEvent\"]\n    // Android and iOS.\n  ].forEach((e) => {\n    let t = window;\n    e.forEach((n, r, o) => {\n      if (r === o.length - 1) {\n        t[n] = k;\n        return;\n      }\n      n in t || (t[n] = {}), t = t[n];\n    });\n  });\n}\nfunction wt() {\n  [\"TelegramGameProxy_receiveEvent\", \"TelegramGameProxy\", \"Telegram\"].forEach((e) => {\n    delete window[e];\n  });\n}\nfunction ht(e, t, n) {\n  ce(e).unsub(t, n);\n}\nfunction dt(e, t) {\n  return ie().sub(e, t);\n}\nfunction mt(e, t) {\n  N.unsub(e, t);\n}\nfunction tt(e) {\n  return ({ req_id: t }) => t === e;\n}\nfunction J(e) {\n  return e.split(\".\").map(Number);\n}\nfunction nt(e, t) {\n  const n = J(e), r = J(t), o = Math.max(n.length, r.length);\n  for (let s = 0; s < o; s += 1) {\n    const a = n[s] || 0, i = r[s] || 0;\n    if (a !== i)\n      return a > i ? 1 : -1;\n  }\n  return 0;\n}\nfunction p(e, t) {\n  return nt(e, t) <= 0;\n}\nfunction B(e, t, n) {\n  if (typeof n == \"string\") {\n    if (e === \"web_app_open_link\") {\n      if (t === \"try_instant_view\")\n        return p(\"6.4\", n);\n      if (t === \"try_browser\")\n        return p(\"7.6\", n);\n    }\n    if (e === \"web_app_set_header_color\" && t === \"color\")\n      return p(\"6.9\", n);\n    if (e === \"web_app_close\" && t === \"return_back\")\n      return p(\"7.6\", n);\n    if (e === \"web_app_setup_main_button\" && t === \"has_shine_effect\")\n      return p(\"7.10\", n);\n  }\n  switch (e) {\n    case \"web_app_open_tg_link\":\n    case \"web_app_open_invoice\":\n    case \"web_app_setup_back_button\":\n    case \"web_app_set_background_color\":\n    case \"web_app_set_header_color\":\n    case \"web_app_trigger_haptic_feedback\":\n      return p(\"6.1\", t);\n    case \"web_app_open_popup\":\n      return p(\"6.2\", t);\n    case \"web_app_close_scan_qr_popup\":\n    case \"web_app_open_scan_qr_popup\":\n    case \"web_app_read_text_from_clipboard\":\n      return p(\"6.4\", t);\n    case \"web_app_switch_inline_query\":\n      return p(\"6.7\", t);\n    case \"web_app_invoke_custom_method\":\n    case \"web_app_request_write_access\":\n    case \"web_app_request_phone\":\n      return p(\"6.9\", t);\n    case \"web_app_setup_settings_button\":\n      return p(\"6.10\", t);\n    case \"web_app_biometry_get_info\":\n    case \"web_app_biometry_open_settings\":\n    case \"web_app_biometry_request_access\":\n    case \"web_app_biometry_request_auth\":\n    case \"web_app_biometry_update_token\":\n      return p(\"7.2\", t);\n    case \"web_app_setup_swipe_behavior\":\n      return p(\"7.7\", t);\n    case \"web_app_setup_secondary_button\":\n    case \"web_app_set_bottom_bar_color\":\n      return p(\"7.10\", t);\n    default:\n      return [\n        \"iframe_ready\",\n        \"iframe_will_reload\",\n        \"web_app_close\",\n        \"web_app_data_send\",\n        \"web_app_expand\",\n        \"web_app_open_link\",\n        \"web_app_ready\",\n        \"web_app_request_theme\",\n        \"web_app_request_viewport\",\n        \"web_app_setup_main_button\",\n        \"web_app_setup_closing_behavior\"\n      ].includes(e);\n  }\n}\nfunction Et(e, t) {\n  t || (t = \"strict\");\n  const n = typeof t == \"function\" ? t : (r) => {\n    const { method: o, version: s } = r;\n    let a, i;\n    if (\"param\" in r ? (a = `Parameter \"${r.param}\" of \"${o}\" method is unsupported in Mini Apps version ${s}`, i = Ge) : (a = `Method \"${o}\" is unsupported in Mini Apps version ${s}`, i = Be), t === \"strict\")\n      throw new b(i, a);\n    return console.warn(a);\n  };\n  return (r, o) => B(r, e) ? Ne(o) && r === \"web_app_set_header_color\" && \"color\" in o && !B(r, \"color\", e) ? n({ version: e, method: r, param: \"color\" }) : pe(r, o) : n({ version: e, method: r });\n}\nfunction yt(e, t, n, r) {\n  return fe(\"web_app_invoke_custom_method\", \"custom_method_invoked\", {\n    ...r || {},\n    params: { method: e, params: t, req_id: n },\n    capture: tt(n)\n  }).then(({ result: o, error: s }) => {\n    if (s)\n      throw new b(Ke, s);\n    return o;\n  });\n}\nfunction rt(e) {\n  e.unsubAll(), e.reset();\n}\nfunction vt() {\n  var e;\n  (e = C()) == null || e(), [\n    ...Object.values(y()),\n    y,\n    N,\n    C,\n    ue,\n    ae\n  ].forEach(rt);\n}\n\n//# sourceMappingURL=index.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHNzcikvLi9ub2RlX21vZHVsZXMvQHRlbGVncmFtLWFwcHMvYnJpZGdlL2Rpc3QvaW5kZXguanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx3Q0FBd0MsZ0JBQWdCO0FBQ3hEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOO0FBQ0E7QUFDQSx1QkFBdUIsRUFBRSxtQkFBbUIsbUNBQW1DLEVBQUUsR0FBRztBQUNwRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsTUFBTTtBQUNOLHdCQUF3QixVQUFVO0FBQ2xDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxVQUFVO0FBQ1Y7QUFDQSx5QkFBeUIsRUFBRTtBQUMzQjtBQUNBLFdBQVc7QUFDWDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWTtBQUNaO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBLGdEQUFnRCxrQkFBa0I7QUFDbEU7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNB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QUFrQixPQUFPO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsWUFBWSx3QkFBd0I7QUFDcEM7QUFDQSwwQ0FBMEMsUUFBUSxRQUFRLEVBQUUsK0NBQStDLEVBQUUsNkJBQTZCLEVBQUUsd0NBQXdDLEVBQUU7QUFDdEw7QUFDQTtBQUNBO0FBQ0Esa0hBQWtILHVDQUF1QyxtQkFBbUIsdUJBQXVCO0FBQ25NO0FBQ0E7QUFDQTtBQUNBLGNBQWM7QUFDZCxjQUFjLGlDQUFpQztBQUMvQztBQUNBLEdBQUcsVUFBVSxxQkFBcUI7QUFDbEM7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQW1ERTtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbmV4dGpzLWJvaWxlcnBsYXRlLXRlbXBsYXRlLy4vbm9kZV9tb2R1bGVzL0B0ZWxlZ3JhbS1hcHBzL2JyaWRnZS9kaXN0L2luZGV4LmpzPzU3NzgiXSwic291cmNlc0NvbnRlbnQiOlsibGV0IHYgPSBjbGFzcyBIIGV4dGVuZHMgRXJyb3Ige1xuICBjb25zdHJ1Y3Rvcih0LCBuLCByKSB7XG4gICAgc3VwZXIoXG4gICAgICB0eXBlb2YgbiA9PSBcIm9iamVjdFwiID8gbi5tZXNzYWdlIDogbiB8fCB0LFxuICAgICAge1xuICAgICAgICBjYXVzZTogdHlwZW9mIG4gPT0gXCJvYmplY3RcIiA/IG4uY2F1c2UgOiByXG4gICAgICB9XG4gICAgKSwgdGhpcy50eXBlID0gdCwgT2JqZWN0LnNldFByb3RvdHlwZU9mKHRoaXMsIEgucHJvdG90eXBlKTtcbiAgfVxufTtcbmZ1bmN0aW9uIEcoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9bQS1aXS9nLCAodCkgPT4gYF8ke3QudG9Mb3dlckNhc2UoKX1gKTtcbn1cbmZ1bmN0aW9uIHdlKGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvX1thLXpdL2csICh0KSA9PiB0WzFdLnRvVXBwZXJDYXNlKCkpO1xufVxuY29uc3QgaGUgPSBcIkVSUl9JTlZBTElEX1ZBTFVFXCIsIGRlID0gXCJFUlJfVU5FWFBFQ1RFRF9WQUxVRVwiLCBtZSA9IFwiRVJSX1VORVhQRUNURURfVFlQRVwiLCBWID0gXCJFUlJfUEFSU0VcIjtcbmZ1bmN0aW9uIEsoZSwgdCkge1xuICBjb25zdCBuID0ge307XG4gIGZvciAoY29uc3QgciBpbiBlKSB7XG4gICAgY29uc3QgbyA9IGVbcl07XG4gICAgaWYgKCFvKVxuICAgICAgY29udGludWU7XG4gICAgbGV0IHMsIGE7XG4gICAgdHlwZW9mIG8gPT0gXCJmdW5jdGlvblwiID8gKHMgPSByLCBhID0gbykgOiBbcywgYV0gPSBvO1xuICAgIHRyeSB7XG4gICAgICBjb25zdCBpID0gYSh0KHMpKTtcbiAgICAgIGkgIT09IHZvaWQgMCAmJiAobltyXSA9IGkpO1xuICAgIH0gY2F0Y2ggKGkpIHtcbiAgICAgIHRocm93IG5ldyB2KFxuICAgICAgICBWLFxuICAgICAgICBgUGFyc2VyIGZvciBcIiR7cn1cIiBwcm9wZXJ0eSBmYWlsZWQke3MgPT09IHIgPyBcIlwiIDogYC4gU291cmNlIGZpZWxkOiBcIiR7c31cImB9YCxcbiAgICAgICAgaVxuICAgICAgKTtcbiAgICB9XG4gIH1cbiAgcmV0dXJuIG47XG59XG5mdW5jdGlvbiBaKGUpIHtcbiAgbGV0IHQgPSBlO1xuICBpZiAodHlwZW9mIHQgPT0gXCJzdHJpbmdcIilcbiAgICB0cnkge1xuICAgICAgdCA9IEpTT04ucGFyc2UodCk7XG4gICAgfSBjYXRjaCAobikge1xuICAgICAgdGhyb3cgbmV3IHYoaGUsIHsgY2F1c2U6IG4gfSk7XG4gICAgfVxuICBpZiAodHlwZW9mIHQgIT0gXCJvYmplY3RcIiB8fCAhdCB8fCBBcnJheS5pc0FycmF5KHQpKVxuICAgIHRocm93IG5ldyB2KGRlKTtcbiAgcmV0dXJuIHQ7XG59XG5mdW5jdGlvbiBnKGUsIHQpIHtcbiAgcmV0dXJuIChuKSA9PiB7XG4gICAgY29uc3QgciA9IChvKSA9PiB7XG4gICAgICBpZiAoIShuICYmIG8gPT09IHZvaWQgMCkpXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgcmV0dXJuIHQobyk7XG4gICAgICAgIH0gY2F0Y2ggKHMpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgdihWLCB7XG4gICAgICAgICAgICBtZXNzYWdlOiBgXCIke2V9XCIgdHJhbnNmb3JtZXIgZmFpbGVkIHRvIHBhcnNlIHRoZSB2YWx1ZWAsXG4gICAgICAgICAgICBjYXVzZTogc1xuICAgICAgICAgIH0pO1xuICAgICAgICB9XG4gICAgfTtcbiAgICByZXR1cm4gLyogQF9fUFVSRV9fICovIE9iamVjdC5hc3NpZ24oXG4gICAgICByLFxuICAgICAge1xuICAgICAgICBpc1ZhbGlkKG8pIHtcbiAgICAgICAgICB0cnkge1xuICAgICAgICAgICAgcmV0dXJuIHIobyksICEwO1xuICAgICAgICAgIH0gY2F0Y2gge1xuICAgICAgICAgICAgcmV0dXJuICExO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgfVxuICAgICk7XG4gIH07XG59XG5mdW5jdGlvbiBfKGUsIHQpIHtcbiAgcmV0dXJuIGcodCB8fCBcIm9iamVjdFwiLCAobikgPT4ge1xuICAgIGNvbnN0IHIgPSBaKG4pO1xuICAgIHJldHVybiBLKGUsIChvKSA9PiByW29dKTtcbiAgfSk7XG59XG5mdW5jdGlvbiBSKGUpIHtcbiAgdGhyb3cgbmV3IHYobWUsIGBVbmV4cGVjdGVkIHZhbHVlIHJlY2VpdmVkOiAke0pTT04uc3RyaW5naWZ5KGUpfWApO1xufVxuY29uc3QgJCA9IGcoXCJib29sZWFuXCIsIChlKSA9PiB7XG4gIGlmICh0eXBlb2YgZSA9PSBcImJvb2xlYW5cIilcbiAgICByZXR1cm4gZTtcbiAgY29uc3QgdCA9IFN0cmluZyhlKTtcbiAgaWYgKHQgPT09IFwiMVwiIHx8IHQgPT09IFwidHJ1ZVwiKVxuICAgIHJldHVybiAhMDtcbiAgaWYgKHQgPT09IFwiMFwiIHx8IHQgPT09IFwiZmFsc2VcIilcbiAgICByZXR1cm4gITE7XG4gIFIoZSk7XG59KSwgbCA9IGcoXCJzdHJpbmdcIiwgKGUpID0+IHtcbiAgaWYgKHR5cGVvZiBlID09IFwic3RyaW5nXCIgfHwgdHlwZW9mIGUgPT0gXCJudW1iZXJcIilcbiAgICByZXR1cm4gZS50b1N0cmluZygpO1xuICBSKGUpO1xufSksIFAgPSBnKFwibnVtYmVyXCIsIChlKSA9PiB7XG4gIGlmICh0eXBlb2YgZSA9PSBcIm51bWJlclwiKVxuICAgIHJldHVybiBlO1xuICBpZiAodHlwZW9mIGUgPT0gXCJzdHJpbmdcIikge1xuICAgIGNvbnN0IHQgPSBOdW1iZXIoZSk7XG4gICAgaWYgKCFOdW1iZXIuaXNOYU4odCkpXG4gICAgICByZXR1cm4gdDtcbiAgfVxuICBSKGUpO1xufSksIEVlID0gZyhcImRhdGVcIiwgKGUpID0+IGUgaW5zdGFuY2VvZiBEYXRlID8gZSA6IG5ldyBEYXRlKFAoKShlKSAqIDFlMykpO1xuZnVuY3Rpb24geihlLCB0KSB7XG4gIHJldHVybiBnKHQgfHwgXCJzZWFyY2hQYXJhbXNcIiwgKG4pID0+IHtcbiAgICB0eXBlb2YgbiAhPSBcInN0cmluZ1wiICYmICEobiBpbnN0YW5jZW9mIFVSTFNlYXJjaFBhcmFtcykgJiYgUihuKTtcbiAgICBjb25zdCByID0gdHlwZW9mIG4gPT0gXCJzdHJpbmdcIiA/IG5ldyBVUkxTZWFyY2hQYXJhbXMobikgOiBuO1xuICAgIHJldHVybiBLKGUsIChvKSA9PiB7XG4gICAgICBjb25zdCBzID0gci5nZXQobyk7XG4gICAgICByZXR1cm4gcyA9PT0gbnVsbCA/IHZvaWQgMCA6IHM7XG4gICAgfSk7XG4gIH0pO1xufVxuZnVuY3Rpb24gVShlKSB7XG4gIGZvciAoY29uc3QgdCBpbiBlKVxuICAgIGVbdF0gPSBbRyh0KSwgZVt0XV07XG4gIHJldHVybiBlO1xufVxuY29uc3QgeWUgPSAoZSkgPT4ge1xuICBjb25zdCB0ID0gUCgpLCBuID0gUCghMCksIHIgPSBsKCksIG8gPSBsKCEwKSwgcyA9ICQoITApLCBhID0gXyhVKHtcbiAgICBhZGRlZFRvQXR0YWNobWVudE1lbnU6IHMsXG4gICAgYWxsb3dzV3JpdGVUb1BtOiBzLFxuICAgIGZpcnN0TmFtZTogcixcbiAgICBpZDogdCxcbiAgICBpc0JvdDogcyxcbiAgICBpc1ByZW1pdW06IHMsXG4gICAgbGFuZ3VhZ2VDb2RlOiBvLFxuICAgIGxhc3ROYW1lOiBvLFxuICAgIHBob3RvVXJsOiBvLFxuICAgIHVzZXJuYW1lOiBvXG4gIH0pLCBcIlVzZXJcIikoITApO1xuICByZXR1cm4geihcbiAgICBVKHtcbiAgICAgIGF1dGhEYXRlOiBFZSgpLFxuICAgICAgY2FuU2VuZEFmdGVyOiBuLFxuICAgICAgY2hhdDogXyhcbiAgICAgICAgVSh7XG4gICAgICAgICAgaWQ6IHQsXG4gICAgICAgICAgdHlwZTogcixcbiAgICAgICAgICB0aXRsZTogcixcbiAgICAgICAgICBwaG90b1VybDogbyxcbiAgICAgICAgICB1c2VybmFtZTogb1xuICAgICAgICB9KSxcbiAgICAgICAgXCJDaGF0XCJcbiAgICAgICkoITApLFxuICAgICAgY2hhdEluc3RhbmNlOiBvLFxuICAgICAgY2hhdFR5cGU6IG8sXG4gICAgICBoYXNoOiByLFxuICAgICAgcXVlcnlJZDogbyxcbiAgICAgIHJlY2VpdmVyOiBhLFxuICAgICAgc3RhcnRQYXJhbTogbyxcbiAgICAgIHVzZXI6IGFcbiAgICB9KSxcbiAgICBcImluaXREYXRhXCJcbiAgKShlKTtcbn07XG5mdW5jdGlvbiB2ZShlKSB7XG4gIHJldHVybiAvXiNbXFxkYS1mXXs2fSQvaS50ZXN0KGUpO1xufVxuZnVuY3Rpb24gUGUoZSkge1xuICByZXR1cm4gL14jW1xcZGEtZl17M30kL2kudGVzdChlKTtcbn1cbmZ1bmN0aW9uIFJlKGUpIHtcbiAgY29uc3QgdCA9IGUucmVwbGFjZSgvXFxzL2csIFwiXCIpLnRvTG93ZXJDYXNlKCk7XG4gIGlmICh2ZSh0KSlcbiAgICByZXR1cm4gdDtcbiAgaWYgKFBlKHQpKSB7XG4gICAgbGV0IHIgPSBcIiNcIjtcbiAgICBmb3IgKGxldCBvID0gMDsgbyA8IDM7IG8gKz0gMSlcbiAgICAgIHIgKz0gdFsxICsgb10ucmVwZWF0KDIpO1xuICAgIHJldHVybiByO1xuICB9XG4gIGNvbnN0IG4gPSB0Lm1hdGNoKC9ecmdiXFwoKFxcZHsxLDN9KSwoXFxkezEsM30pLChcXGR7MSwzfSlcXCkkLykgfHwgdC5tYXRjaCgvXnJnYmFcXCgoXFxkezEsM30pLChcXGR7MSwzfSksKFxcZHsxLDN9KSxcXGR7MSwzfVxcKSQvKTtcbiAgaWYgKCFuKVxuICAgIHRocm93IG5ldyBFcnJvcihgVmFsdWUgXCIke2V9XCIgZG9lcyBub3Qgc2F0aXNmeSBhbnkgb2Yga25vd24gUkdCIGZvcm1hdHMuYCk7XG4gIHJldHVybiBuLnNsaWNlKDEpLnJlZHVjZSgociwgbykgPT4ge1xuICAgIGNvbnN0IHMgPSBwYXJzZUludChvLCAxMCkudG9TdHJpbmcoMTYpO1xuICAgIHJldHVybiByICsgKHMubGVuZ3RoID09PSAxID8gXCIwXCIgOiBcIlwiKSArIHM7XG4gIH0sIFwiI1wiKTtcbn1cbmNvbnN0IFRlID0gZyhcInJnYlwiLCAoZSkgPT4gUmUobCgpKGUpKSksIFNlID0gZyhcbiAgXCJ0aGVtZVBhcmFtc1wiLFxuICAoZSkgPT4ge1xuICAgIGNvbnN0IHQgPSBUZSghMCk7XG4gICAgcmV0dXJuIE9iamVjdC5lbnRyaWVzKFooZSkpLnJlZHVjZSgobiwgW3IsIG9dKSA9PiAoblt3ZShyKV0gPSB0KG8pLCBuKSwge30pO1xuICB9XG4pO1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uIFgoZSkge1xuICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoXG4gICAgT2JqZWN0LmZyb21FbnRyaWVzKFxuICAgICAgT2JqZWN0LmVudHJpZXMoZSkubWFwKChbdCwgbl0pID0+IFtHKHQpLCBuXSlcbiAgICApXG4gICk7XG59XG5jb25zdCBBZSA9IChlKSA9PiB7XG4gIGNvbnN0IHQgPSBsKCksIG4gPSBsKCEwKSwgciA9ICQoITApO1xuICByZXR1cm4geih7XG4gICAgYm90SW5saW5lOiBbXCJ0Z1dlYkFwcEJvdElubGluZVwiLCByXSxcbiAgICBpbml0RGF0YTogW1widGdXZWJBcHBEYXRhXCIsIHllKCEwKV0sXG4gICAgaW5pdERhdGFSYXc6IFtcInRnV2ViQXBwRGF0YVwiLCBuXSxcbiAgICBwbGF0Zm9ybTogW1widGdXZWJBcHBQbGF0Zm9ybVwiLCB0XSxcbiAgICBzaG93U2V0dGluZ3M6IFtcInRnV2ViQXBwU2hvd1NldHRpbmdzXCIsIHJdLFxuICAgIHN0YXJ0UGFyYW06IFtcInRnV2ViQXBwU3RhcnRQYXJhbVwiLCBuXSxcbiAgICB0aGVtZVBhcmFtczogW1widGdXZWJBcHBUaGVtZVBhcmFtc1wiLCBTZSgpXSxcbiAgICB2ZXJzaW9uOiBbXCJ0Z1dlYkFwcFZlcnNpb25cIiwgdF1cbiAgfSwgXCJsYXVuY2hQYXJhbXNcIikoZSk7XG59O1xuLy8gQF9fTk9fU0lERV9FRkZFQ1RTX19cbmZ1bmN0aW9uICRlKGUpIHtcbiAgY29uc3QgeyBpbml0RGF0YVJhdzogdCwgc3RhcnRQYXJhbTogbiwgc2hvd1NldHRpbmdzOiByLCBib3RJbmxpbmU6IG8gfSA9IGUsIHMgPSBuZXcgVVJMU2VhcmNoUGFyYW1zKCk7XG4gIHJldHVybiBzLnNldChcInRnV2ViQXBwUGxhdGZvcm1cIiwgZS5wbGF0Zm9ybSksIHMuc2V0KFwidGdXZWJBcHBUaGVtZVBhcmFtc1wiLCAvKiBAX19QVVJFX18gKi8gWChlLnRoZW1lUGFyYW1zKSksIHMuc2V0KFwidGdXZWJBcHBWZXJzaW9uXCIsIGUudmVyc2lvbiksIHQgJiYgcy5zZXQoXCJ0Z1dlYkFwcERhdGFcIiwgdCksIG4gJiYgcy5zZXQoXCJ0Z1dlYkFwcFN0YXJ0UGFyYW1cIiwgbiksIHR5cGVvZiByID09IFwiYm9vbGVhblwiICYmIHMuc2V0KFwidGdXZWJBcHBTaG93U2V0dGluZ3NcIiwgciA/IFwiMVwiIDogXCIwXCIpLCB0eXBlb2YgbyA9PSBcImJvb2xlYW5cIiAmJiBzLnNldChcInRnV2ViQXBwQm90SW5saW5lXCIsIG8gPyBcIjFcIiA6IFwiMFwiKSwgcy50b1N0cmluZygpO1xufVxuY29uc3QgWSA9IF8oe1xuICBldmVudFR5cGU6IGwoKSxcbiAgZXZlbnREYXRhOiAoZSkgPT4gZVxufSwgXCJtaW5pQXBwc01lc3NhZ2VcIiksIFEgPSBnKFwiZm5cIiwgKGUpID0+IHtcbiAgaWYgKHR5cGVvZiBlID09IFwiZnVuY3Rpb25cIilcbiAgICByZXR1cm4gZTtcbiAgUihlKTtcbn0pO1xuZnVuY3Rpb24gTmUoZSkge1xuICByZXR1cm4gISFlICYmIHR5cGVvZiBlID09IFwib2JqZWN0XCIgJiYgIUFycmF5LmlzQXJyYXkoZSk7XG59XG5jb25zdCBDZSA9IF8oe1xuICBUZWxlZ3JhbVdlYnZpZXdQcm94eTogXyh7IHBvc3RFdmVudDogUSgpIH0pKClcbn0pO1xuZnVuY3Rpb24gZWUoZSkge1xuICByZXR1cm4gQ2UoKS5pc1ZhbGlkKGUpO1xufVxuZnVuY3Rpb24gRGUoKSB7XG4gIHRyeSB7XG4gICAgcmV0dXJuIHdpbmRvdy5zZWxmICE9PSB3aW5kb3cudG9wO1xuICB9IGNhdGNoIHtcbiAgICByZXR1cm4gITA7XG4gIH1cbn1cbnZhciBVZSA9IE9iamVjdC5kZWZpbmVQcm9wZXJ0eSwgamUgPSAoZSwgdCwgbikgPT4gdCBpbiBlID8gVWUoZSwgdCwgeyBlbnVtZXJhYmxlOiAhMCwgY29uZmlndXJhYmxlOiAhMCwgd3JpdGFibGU6ICEwLCB2YWx1ZTogbiB9KSA6IGVbdF0gPSBuLCB0ZSA9IChlLCB0LCBuKSA9PiBqZShlLCB0eXBlb2YgdCAhPSBcInN5bWJvbFwiID8gdCArIFwiXCIgOiB0LCBuKTtcbmNsYXNzIGIgZXh0ZW5kcyBFcnJvciB7XG4gIGNvbnN0cnVjdG9yKHQsIG4sIHIpIHtcbiAgICBzdXBlcihcbiAgICAgIHR5cGVvZiBuID09IFwib2JqZWN0XCIgPyBuLm1lc3NhZ2UgOiBuIHx8IHQsXG4gICAgICB7XG4gICAgICAgIGNhdXNlOiB0eXBlb2YgbiA9PSBcIm9iamVjdFwiID8gbi5jYXVzZSA6IHJcbiAgICAgIH1cbiAgICApLCB0aGlzLnR5cGUgPSB0LCBPYmplY3Quc2V0UHJvdG90eXBlT2YodGhpcywgYi5wcm90b3R5cGUpO1xuICB9XG59XG5mdW5jdGlvbiB4KGUsIHQsIG4pIHtcbiAgcmV0dXJuIGUuYWRkRXZlbnRMaXN0ZW5lcih0LCBuKSwgKCkgPT4gZS5yZW1vdmVFdmVudExpc3RlbmVyKHQsIG4pO1xufVxuZnVuY3Rpb24gTCguLi5lKSB7XG4gIGNvbnN0IHQgPSBlLmZsYXQoMSk7XG4gIHJldHVybiBbXG4gICAgdC5wdXNoLmJpbmQodCksXG4gICAgKCkgPT4ge1xuICAgICAgdC5mb3JFYWNoKChuKSA9PiB7XG4gICAgICAgIG4oKTtcbiAgICAgIH0pO1xuICAgIH1cbiAgXTtcbn1cbmZ1bmN0aW9uIHhlKGUsIHQpIHtcbiAgcmV0dXJuIGUgaW5zdGFuY2VvZiBiICYmIGUudHlwZSA9PT0gdDtcbn1cbmZ1bmN0aW9uIE8oZSkge1xuICByZXR1cm4gKHQpID0+IHhlKHQsIGUpO1xufVxuY29uc3QgbmUgPSBcIkVSUl9BQk9SVEVEXCIsIHJlID0gXCJFUlJfQ0FOQ0VMRURcIiwgb2UgPSBcIkVSUl9USU1FRF9PVVRcIjtcbmZ1bmN0aW9uIE0oZSkge1xuICByZXR1cm4gbmV3IGIobmUsIHsgY2F1c2U6IGUgfSk7XG59XG5jb25zdCBvdCA9IE8ob2UpLCBzdCA9IE8obmUpLCBhdCA9IE8ocmUpO1xuZnVuY3Rpb24gcShlLCB0KSB7XG4gIHJldHVybiBlLnJlamVjdCA9IHQucmVqZWN0LCBlO1xufVxuY2xhc3MgdyBleHRlbmRzIFByb21pc2Uge1xuICBjb25zdHJ1Y3Rvcih0LCBuKSB7XG4gICAgbGV0IHIsIG87XG4gICAgdHlwZW9mIHQgPT0gXCJmdW5jdGlvblwiID8gKHIgPSB0LCBvID0gbikgOiBvID0gdDtcbiAgICBsZXQgcywgYTtcbiAgICBzdXBlcigoaSwgYykgPT4ge1xuICAgICAgbyB8fCAobyA9IHt9KTtcbiAgICAgIGNvbnN0IHsgYWJvcnRTaWduYWw6IHUgfSA9IG87XG4gICAgICBpZiAodSAmJiB1LmFib3J0ZWQpXG4gICAgICAgIHJldHVybiBjKE0odS5yZWFzb24pKTtcbiAgICAgIGNvbnN0IFtmLCBoXSA9IEwoKSwgZCA9IChtKSA9PiAoLi4uZ2UpID0+IChoKCksIG0oLi4uZ2UpKSwgVCA9IG5ldyBBYm9ydENvbnRyb2xsZXIoKSwgeyBzaWduYWw6IFMgfSA9IFQ7XG4gICAgICBhID0gZCgobSkgPT4ge1xuICAgICAgICBULmFib3J0KG0pLCBjKG0pO1xuICAgICAgfSksIHMgPSBkKGkpLCB1ICYmIGYoXG4gICAgICAgIHgodSwgXCJhYm9ydFwiLCAoKSA9PiB7XG4gICAgICAgICAgYShNKHUucmVhc29uKSk7XG4gICAgICAgIH0pXG4gICAgICApO1xuICAgICAgY29uc3QgeyB0aW1lb3V0OiBEIH0gPSBvO1xuICAgICAgaWYgKEQpIHtcbiAgICAgICAgY29uc3QgbSA9IHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIGEobmV3IGIob2UsIGBUaW1lb3V0IHJlYWNoZWQ6ICR7RH1tc2ApKTtcbiAgICAgICAgfSwgRCk7XG4gICAgICAgIGYoKCkgPT4ge1xuICAgICAgICAgIGNsZWFyVGltZW91dChtKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgICByICYmIHIocywgYSwgUyk7XG4gICAgfSksIHRlKHRoaXMsIFwicmVqZWN0XCIpLCB0aGlzLnJlamVjdCA9IGE7XG4gIH1cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBuZXcgQmV0dGVyUHJvbWlzZSBpbnN0YW5jZSB1c2luZyBleGVjdXRvciwgcmVzb2x2aW5nIHByb21pc2Ugd2hlbiBhIHJlc3VsdFxuICAgKiB3YXMgcmV0dXJuZWQuXG4gICAqIEBwYXJhbSBmbiAtIGZ1bmN0aW9uIHJldHVybmluZyBwcm9taXNlIHJlc3VsdC5cbiAgICogQHBhcmFtIG9wdGlvbnMgLSBhZGRpdGlvbmFsIG9wdGlvbnMuXG4gICAqL1xuICBzdGF0aWMgd2l0aEZuKHQsIG4pIHtcbiAgICByZXR1cm4gbmV3IHcoKHIsIG8sIHMpID0+IHtcbiAgICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGEgPSB0KHMpO1xuICAgICAgICByZXR1cm4gYSBpbnN0YW5jZW9mIFByb21pc2UgPyBhLnRoZW4ociwgbykgOiByKGEpO1xuICAgICAgfSBjYXRjaCAoYSkge1xuICAgICAgICBvKGEpO1xuICAgICAgfVxuICAgIH0sIG4pO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UucmVzb2x2ZVxuICAgKi9cbiAgc3RhdGljIHJlc29sdmUodCkge1xuICAgIHJldHVybiBuZXcgdygobikgPT4ge1xuICAgICAgbih0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnJlamVjdFxuICAgKi9cbiAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgcmV0dXJuIG5ldyB3KChuLCByKSA9PiB7XG4gICAgICByKHQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBDYW5jZWxzIHRoZSBwcm9taXNlIGV4ZWN1dGlvbi5cbiAgICovXG4gIGNhbmNlbCgpIHtcbiAgICB0aGlzLnJlamVjdChuZXcgYihyZSkpO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UuY2F0Y2hcbiAgICovXG4gIGNhdGNoKHQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgdCk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5maW5hbGx5XG4gICAqL1xuICBmaW5hbGx5KHQpIHtcbiAgICByZXR1cm4gcShzdXBlci5maW5hbGx5KHQpLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnRoZW5cbiAgICovXG4gIHRoZW4odCwgbikge1xuICAgIHJldHVybiBxKHN1cGVyLnRoZW4odCwgbiksIHRoaXMpO1xuICB9XG59XG5mdW5jdGlvbiBGKGUsIHQpIHtcbiAgcmV0dXJuIGUucmVzb2x2ZSA9IHQucmVzb2x2ZSwgZTtcbn1cbmNsYXNzIEEgZXh0ZW5kcyB3IHtcbiAgY29uc3RydWN0b3IodCwgbikge1xuICAgIGxldCByLCBvO1xuICAgIHR5cGVvZiB0ID09IFwiZnVuY3Rpb25cIiA/IChyID0gdCwgbyA9IG4pIDogbyA9IHQ7XG4gICAgbGV0IHM7XG4gICAgc3VwZXIoKGEsIGksIGMpID0+IHtcbiAgICAgIHMgPSBhLCByICYmIHIoYSwgaSwgYyk7XG4gICAgfSwgbyksIHRlKHRoaXMsIFwicmVzb2x2ZVwiKSwgdGhpcy5yZXNvbHZlID0gcztcbiAgfVxuICAvKipcbiAgICogQ3JlYXRlcyBhIG5ldyBFbmhhbmNlZFByb21pc2UgaW5zdGFuY2UgdXNpbmcgZXhlY3V0b3IsIHJlc29sdmluZyBwcm9taXNlIHdoZW4gYSByZXN1bHRcbiAgICogd2FzIHJldHVybmVkLlxuICAgKiBAcGFyYW0gZm4gLSBmdW5jdGlvbiByZXR1cm5pbmcgcHJvbWlzZSByZXN1bHQuXG4gICAqIEBwYXJhbSBvcHRpb25zIC0gYWRkaXRpb25hbCBvcHRpb25zLlxuICAgKi9cbiAgc3RhdGljIHdpdGhGbih0LCBuKSB7XG4gICAgcmV0dXJuIG5ldyBBKFxuICAgICAgKHIsIG8sIHMpID0+IHcud2l0aEZuKHQsIHsgYWJvcnRTaWduYWw6IHMgfSkudGhlbihyLCBvKSxcbiAgICAgIG5cbiAgICApO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UucmVzb2x2ZVxuICAgKi9cbiAgc3RhdGljIHJlc29sdmUodCkge1xuICAgIHJldHVybiBuZXcgQSgobikgPT4ge1xuICAgICAgbih0KTtcbiAgICB9KTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnJlamVjdFxuICAgKi9cbiAgc3RhdGljIHJlamVjdCh0KSB7XG4gICAgcmV0dXJuIG5ldyBBKChuLCByKSA9PiB7XG4gICAgICByKHQpO1xuICAgIH0pO1xuICB9XG4gIC8qKlxuICAgKiBAc2VlIFByb21pc2UuY2F0Y2hcbiAgICovXG4gIGNhdGNoKHQpIHtcbiAgICByZXR1cm4gdGhpcy50aGVuKHZvaWQgMCwgdCk7XG4gIH1cbiAgLyoqXG4gICAqIEBzZWUgUHJvbWlzZS5maW5hbGx5XG4gICAqL1xuICBmaW5hbGx5KHQpIHtcbiAgICByZXR1cm4gRihzdXBlci5maW5hbGx5KHQpLCB0aGlzKTtcbiAgfVxuICAvKipcbiAgICogQHNlZSBQcm9taXNlLnRoZW5cbiAgICovXG4gIHRoZW4odCwgbikge1xuICAgIHJldHVybiBGKHN1cGVyLnRoZW4odCwgbiksIHRoaXMpO1xuICB9XG59XG5mdW5jdGlvbiBpdChlLCB0KSB7XG4gIHJldHVybiBuZXcgdygobikgPT4ge1xuICAgIHNldFRpbWVvdXQobiwgZSk7XG4gIH0sIHsgYWJvcnRTaWduYWw6IHQgfSk7XG59XG5mdW5jdGlvbiBzZShlKSB7XG4gIHJldHVybiBgdGFwcHMvJHtlfWA7XG59XG5mdW5jdGlvbiBrZShlLCB0KSB7XG4gIHNlc3Npb25TdG9yYWdlLnNldEl0ZW0oc2UoZSksIEpTT04uc3RyaW5naWZ5KHQpKTtcbn1cbmZ1bmN0aW9uIExlKGUpIHtcbiAgY29uc3QgdCA9IHNlc3Npb25TdG9yYWdlLmdldEl0ZW0oc2UoZSkpO1xuICB0cnkge1xuICAgIHJldHVybiB0ID8gSlNPTi5wYXJzZSh0KSA6IHZvaWQgMDtcbiAgfSBjYXRjaCB7XG4gIH1cbn1cbmZ1bmN0aW9uIGN0KGUpIHtcbiAgcmV0dXJuIGUucmVwbGFjZSgvW0EtWl0vZywgKHQpID0+IGAtJHt0LnRvTG93ZXJDYXNlKCl9YCk7XG59XG5mdW5jdGlvbiB1dChlKSB7XG4gIHJldHVybiBlLnJlcGxhY2UoL1tBLVpdL2csICh0KSA9PiBgXyR7dC50b0xvd2VyQ2FzZSgpfWApO1xufVxuZnVuY3Rpb24gcHQoZSkge1xuICByZXR1cm4gZS5yZXBsYWNlKC9fW2Etel0vZywgKHQpID0+IHRbMV0udG9VcHBlckNhc2UoKSk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gT2UoZSwgdCkge1xuICB0IHx8ICh0ID0ge30pO1xuICBjb25zdCB7XG4gICAgdGV4dENvbG9yOiBuLFxuICAgIGJnQ29sb3I6IHIsXG4gICAgc2hvdWxkTG9nOiBvID0gITBcbiAgfSA9IHQ7XG4gIGZ1bmN0aW9uIHMoYSwgLi4uaSkge1xuICAgIGlmICghbyB8fCB0eXBlb2YgbyA9PSBcImZ1bmN0aW9uXCIgJiYgIW8oKSlcbiAgICAgIHJldHVybjtcbiAgICBjb25zdCBjID0gXCJmb250LXdlaWdodDpib2xkO3BhZGRpbmc6MCA1cHg7Ym9yZGVyLXJhZGl1czo1cHhcIjtcbiAgICBjb25zb2xlW2FdKFxuICAgICAgYCVjJHtJbnRsLkRhdGVUaW1lRm9ybWF0KFwiZW4tR0JcIiwge1xuICAgICAgICBob3VyOiBcIjItZGlnaXRcIixcbiAgICAgICAgbWludXRlOiBcIjItZGlnaXRcIixcbiAgICAgICAgc2Vjb25kOiBcIjItZGlnaXRcIixcbiAgICAgICAgZnJhY3Rpb25hbFNlY29uZERpZ2l0czogMyxcbiAgICAgICAgdGltZVpvbmU6IFwiVVRDXCJcbiAgICAgIH0pLmZvcm1hdCgvKiBAX19QVVJFX18gKi8gbmV3IERhdGUoKSl9JWMgLyAlYyR7ZX1gLFxuICAgICAgYCR7Y307YmFja2dyb3VuZC1jb2xvcjogbGlnaHRibHVlO2NvbG9yOmJsYWNrYCxcbiAgICAgIFwiXCIsXG4gICAgICBgJHtjfTske24gPyBgY29sb3I6JHtufTtgIDogXCJcIn0ke3IgPyBgYmFja2dyb3VuZC1jb2xvcjoke3J9YCA6IFwiXCJ9YCxcbiAgICAgIC4uLmlcbiAgICApO1xuICB9XG4gIHJldHVybiBbXG4gICAgZnVuY3Rpb24oLi4uYSkge1xuICAgICAgcyhcImxvZ1wiLCAuLi5hKTtcbiAgICB9LFxuICAgIGZ1bmN0aW9uKC4uLmEpIHtcbiAgICAgIHMoXCJlcnJvclwiLCAuLi5hKTtcbiAgICB9XG4gIF07XG59XG5mdW5jdGlvbiBmdChlLCB0KSB7XG4gIGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5zdHlsZS5zZXRQcm9wZXJ0eShlLCB0KTtcbn1cbmZ1bmN0aW9uIGx0KGUpIHtcbiAgZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LnN0eWxlLnJlbW92ZVByb3BlcnR5KGUpO1xufVxuZnVuY3Rpb24gV2UoZSwgdCkge1xuICB0KCk7XG59XG4vLyBAX19OT19TSURFX0VGRkVDVFNfX1xuZnVuY3Rpb24gRShlLCB0KSB7XG4gIHQgfHwgKHQgPSB7fSk7XG4gIGNvbnN0IG4gPSB0LmVxdWFscyB8fCBPYmplY3QuaXM7XG4gIGxldCByID0gW10sIG8gPSBlO1xuICBjb25zdCBzID0gKHUpID0+IHtcbiAgICBpZiAoIW4obywgdSkpIHtcbiAgICAgIGNvbnN0IGYgPSBvO1xuICAgICAgbyA9IHUsIFdlKGMsICgpID0+IHtcbiAgICAgICAgWy4uLnJdLmZvckVhY2goKFtoLCBkXSkgPT4ge1xuICAgICAgICAgIGgodSwgZiksIGQgJiYgaShoLCAhMCk7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuICBmdW5jdGlvbiBhKHUpIHtcbiAgICBjb25zdCBmID0gdHlwZW9mIHUgIT0gXCJvYmplY3RcIiA/IHsgb25jZTogdSB9IDogdTtcbiAgICByZXR1cm4ge1xuICAgICAgb25jZTogZi5vbmNlIHx8ICExLFxuICAgICAgc2lnbmFsOiBmLnNpZ25hbCB8fCAhMVxuICAgIH07XG4gIH1cbiAgY29uc3QgaSA9ICh1LCBmKSA9PiB7XG4gICAgY29uc3QgaCA9IGEoZiksIGQgPSByLmZpbmRJbmRleCgoW1QsIFNdKSA9PiBUID09PSB1ICYmIFMub25jZSA9PT0gaC5vbmNlICYmIFMuc2lnbmFsID09PSBoLnNpZ25hbCk7XG4gICAgZCA+PSAwICYmIHIuc3BsaWNlKGQsIDEpO1xuICB9LCBjID0gT2JqZWN0LmFzc2lnbihcbiAgICBmdW5jdGlvbigpIHtcbiAgICAgIHJldHVybiBJZShjKSwgbztcbiAgICB9LFxuICAgIHtcbiAgICAgIGRlc3Ryb3koKSB7XG4gICAgICAgIHIgPSBbXTtcbiAgICAgIH0sXG4gICAgICBzZXQ6IHMsXG4gICAgICByZXNldCgpIHtcbiAgICAgICAgcyhlKTtcbiAgICAgIH0sXG4gICAgICBzdWIodSwgZikge1xuICAgICAgICByZXR1cm4gci5wdXNoKFt1LCBhKGYpXSksICgpID0+IGkodSwgZik7XG4gICAgICB9LFxuICAgICAgdW5zdWI6IGksXG4gICAgICB1bnN1YkFsbCgpIHtcbiAgICAgICAgciA9IHIuZmlsdGVyKCh1KSA9PiB1WzFdLnNpZ25hbCk7XG4gICAgICB9XG4gICAgfVxuICApO1xuICByZXR1cm4gYztcbn1cbmNvbnN0IGogPSBbXTtcbmZ1bmN0aW9uIEllKGUpIHtcbiAgai5sZW5ndGggJiYgaltqLmxlbmd0aCAtIDFdLmFkZChlKTtcbn1cbmNvbnN0IGFlID0gLyogQF9fUFVSRV9fICovIEUoITEpLCBbVywgTWVdID0gLyogQF9fUFVSRV9fICovIE9lKFwiQnJpZGdlXCIsIHtcbiAgYmdDb2xvcjogXCIjOTE0N2ZmXCIsXG4gIHRleHRDb2xvcjogXCJ3aGl0ZVwiLFxuICBzaG91bGRMb2c6IGFlXG59KSwgcWUgPSB7XG4gIGNsaXBib2FyZF90ZXh0X3JlY2VpdmVkOiBfKHtcbiAgICByZXFfaWQ6IGwoKSxcbiAgICBkYXRhOiAoZSkgPT4gZSA9PT0gbnVsbCA/IGUgOiBsKCEwKShlKVxuICB9LCBcImNsaXBib2FyZF90ZXh0X3JlY2VpdmVkXCIpLFxuICBjdXN0b21fbWV0aG9kX2ludm9rZWQ6IF8oe1xuICAgIHJlcV9pZDogbCgpLFxuICAgIHJlc3VsdDogKGUpID0+IGUsXG4gICAgZXJyb3I6IGwoITApXG4gIH0sIFwiY3VzdG9tX21ldGhvZF9pbnZva2VkXCIpLFxuICBwb3B1cF9jbG9zZWQ6IGcoXCJwb3B1cF9jbG9zZWRcIiwgKGUpID0+IGUgPyBfKHtcbiAgICBidXR0b25faWQ6ICh0KSA9PiB0ID09IG51bGwgPyB2b2lkIDAgOiBsKCkodClcbiAgfSkoKShlKSA6IHt9KSxcbiAgdmlld3BvcnRfY2hhbmdlZDogXyh7XG4gICAgaGVpZ2h0OiBQKCksXG4gICAgd2lkdGg6IChlKSA9PiBlID09IG51bGwgPyB3aW5kb3cuaW5uZXJXaWR0aCA6IFAoKShlKSxcbiAgICBpc19zdGF0ZV9zdGFibGU6ICQoKSxcbiAgICBpc19leHBhbmRlZDogJCgpXG4gIH0sIFwidmlld3BvcnRfY2hhbmdlZFwiKVxufTtcbmZ1bmN0aW9uIEZlKGUpIHtcbiAgY29uc3QgdCA9IHdpbmRvdywgWywgbl0gPSBMKFxuICAgIC8vIEFkZCBcInJlc2l6ZVwiIGV2ZW50IGxpc3RlbmVyIHRvIG1ha2Ugc3VyZSwgd2UgYWx3YXlzIGhhdmUgZnJlc2ggdmlld3BvcnQgaW5mb3JtYXRpb24uXG4gICAgLy8gVGhlIGRlc2t0b3AgdmVyc2lvbiBvZiBUZWxlZ3JhbSBpcyBzb21ldGltZXMgbm90IHNlbmRpbmcgdGhlIFwidmlld3BvcnRfY2hhbmdlZFwiXG4gICAgLy8gZXZlbnQuIEZvciBleGFtcGxlLCB3aGVuIHRoZSBNYWluIEJ1dHRvbiBpcyBzaG93bi4gVGhhdCdzIHdoeSB3ZSBzaG91bGRcbiAgICAvLyBhZGQgb3VyIG93biBsaXN0ZW5lciB0byBtYWtlIHN1cmUgdmlld3BvcnQgaW5mb3JtYXRpb24gaXMgYWx3YXlzIGZyZXNoLlxuICAgIC8vIElzc3VlOiBodHRwczovL2dpdGh1Yi5jb20vVGVsZWdyYW0tTWluaS1BcHBzL3RlbGVncmFtLWFwcHMvaXNzdWVzLzEwXG4gICAgeCh0LCBcInJlc2l6ZVwiLCAoKSA9PiB7XG4gICAgICBlKFtcInZpZXdwb3J0X2NoYW5nZWRcIiwge1xuICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgICBpc19zdGF0ZV9zdGFibGU6ICEwLFxuICAgICAgICBpc19leHBhbmRlZDogITBcbiAgICAgIH1dKTtcbiAgICB9KSxcbiAgICAvLyBBZGQgbGlzdGVuZXIsIHdoaWNoIGhhbmRsZXMgZXZlbnRzIHNlbnQgZnJvbSB0aGUgVGVsZWdyYW0gd2ViIGFwcGxpY2F0aW9uIGFuZCBhbHNvIGV2ZW50c1xuICAgIC8vIGdlbmVyYXRlZCBieSB0aGUgbG9jYWwgZW1pdEV2ZW50IGZ1bmN0aW9uLlxuICAgIHgodCwgXCJtZXNzYWdlXCIsIChyKSA9PiB7XG4gICAgICBpZiAoci5zb3VyY2UgIT09IHQucGFyZW50KVxuICAgICAgICByZXR1cm47XG4gICAgICBsZXQgbztcbiAgICAgIHRyeSB7XG4gICAgICAgIG8gPSBZKCkoci5kYXRhKTtcbiAgICAgIH0gY2F0Y2gge1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBjb25zdCB7IGV2ZW50VHlwZTogcywgZXZlbnREYXRhOiBhIH0gPSBvLCBpID0gcWVbc107XG4gICAgICB0cnkge1xuICAgICAgICBjb25zdCBjID0gaSA/IGkoKShhKSA6IGE7XG4gICAgICAgIFcoXCJFdmVudCByZWNlaXZlZDpcIiwgYyA/IHsgZXZlbnRUeXBlOiBzLCBldmVudERhdGE6IGMgfSA6IHsgZXZlbnRUeXBlOiBzIH0pLCBlKFtzLCBjXSk7XG4gICAgICB9IGNhdGNoIChjKSB7XG4gICAgICAgIE1lKFxuICAgICAgICAgIFtcbiAgICAgICAgICAgIGBBbiBlcnJvciBvY2N1cnJlZCBwcm9jZXNzaW5nIHRoZSBcIiR7c31cIiBldmVudCBmcm9tIHRoZSBUZWxlZ3JhbSBhcHBsaWNhdGlvbi5gLFxuICAgICAgICAgICAgXCJQbGVhc2UsIGZpbGUgYW4gaXNzdWUgaGVyZTpcIixcbiAgICAgICAgICAgIFwiaHR0cHM6Ly9naXRodWIuY29tL1RlbGVncmFtLU1pbmktQXBwcy90ZWxlZ3JhbS1hcHBzL2lzc3Vlcy9uZXcvY2hvb3NlXCJcbiAgICAgICAgICBdLmpvaW4oYFxuYCksXG4gICAgICAgICAgbyxcbiAgICAgICAgICBjXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSlcbiAgKTtcbiAgcmV0dXJuIG47XG59XG5jb25zdCBOID0gLyogQF9fUFVSRV9fICovIEUoKSwgQyA9IC8qIEBfX1BVUkVfXyAqLyBFKCk7XG5mdW5jdGlvbiBpZSgpIHtcbiAgcmV0dXJuIEMoKSB8fCBDLnNldChGZShOLnNldCkpLCBOO1xufVxuY29uc3QgeSA9IC8qIEBfX1BVUkVfXyAqLyBFKHt9KTtcbmZ1bmN0aW9uIGNlKGUpIHtcbiAgbGV0IHQgPSB5KClbZV07XG4gIHJldHVybiB0IHx8ICh0ID0gLyogQF9fUFVSRV9fICovIEUodm9pZCAwLCB7XG4gICAgZXF1YWxzKCkge1xuICAgICAgcmV0dXJuICExO1xuICAgIH1cbiAgfSksIGllKCkuc3ViKChuKSA9PiB7XG4gICAgbiAmJiBuWzBdID09PSBlICYmIHQuc2V0KG5bMV0pO1xuICB9KSwgeS5zZXQoeyAuLi55KCksIFtlXTogdCB9KSksIHQ7XG59XG5mdW5jdGlvbiBKZShlLCB0LCBuKSB7XG4gIHJldHVybiBjZShlKS5zdWIodCwgbik7XG59XG5jb25zdCBCZSA9IFwiRVJSX01FVEhPRF9VTlNVUFBPUlRFRFwiLCBIZSA9IFwiRVJSX1JFVFJJRVZFX0xQX0ZBSUxFRFwiLCBHZSA9IFwiRVJSX01FVEhPRF9QQVJBTUVURVJfVU5TVVBQT1JURURcIiwgVmUgPSBcIkVSUl9VTktOT1dOX0VOVlwiLCBLZSA9IFwiRVJSX0lOVk9LRV9DVVNUT01fTUVUSE9EX1JFU1BPTlNFXCIsIHVlID0gLyogQF9fUFVSRV9fICovIEUoXCJodHRwczovL3dlYi50ZWxlZ3JhbS5vcmdcIik7XG5mdW5jdGlvbiBwZShlLCB0KSB7XG4gIFcoXCJQb3N0aW5nIGV2ZW50OlwiLCB0ID8geyBldmVudFR5cGU6IGUsIGV2ZW50RGF0YTogdCB9IDogeyBldmVudFR5cGU6IGUgfSk7XG4gIGNvbnN0IG4gPSB3aW5kb3c7XG4gIGlmIChlZShuKSkge1xuICAgIG4uVGVsZWdyYW1XZWJ2aWV3UHJveHkucG9zdEV2ZW50KGUsIEpTT04uc3RyaW5naWZ5KHQpKTtcbiAgICByZXR1cm47XG4gIH1cbiAgY29uc3QgciA9IEpTT04uc3RyaW5naWZ5KHsgZXZlbnRUeXBlOiBlLCBldmVudERhdGE6IHQgfSk7XG4gIGlmIChEZSgpKVxuICAgIHJldHVybiBuLnBhcmVudC5wb3N0TWVzc2FnZShyLCB1ZSgpKTtcbiAgY29uc3QgeyBleHRlcm5hbDogbyB9ID0gbjtcbiAgaWYgKF8oeyBub3RpZnk6IFEoKSB9KSgpLmlzVmFsaWQobykpIHtcbiAgICBvLm5vdGlmeShyKTtcbiAgICByZXR1cm47XG4gIH1cbiAgdGhyb3cgbmV3IGIoVmUpO1xufVxuZnVuY3Rpb24gZmUoZSwgdCwgbikge1xuICBuIHx8IChuID0ge30pO1xuICBjb25zdCB7IGNhcHR1cmU6IHIgfSA9IG4sIFtvLCBzXSA9IEwoKTtcbiAgcmV0dXJuIG5ldyB3KChhKSA9PiB7XG4gICAgKEFycmF5LmlzQXJyYXkodCkgPyB0IDogW3RdKS5mb3JFYWNoKChpKSA9PiB7XG4gICAgICBvKFxuICAgICAgICBKZShpLCAoYykgPT4ge1xuICAgICAgICAgICghciB8fCAoQXJyYXkuaXNBcnJheSh0KSA/IHIoe1xuICAgICAgICAgICAgZXZlbnQ6IGksXG4gICAgICAgICAgICBwYXlsb2FkOiBjXG4gICAgICAgICAgfSkgOiByKGMpKSkgJiYgYShjKTtcbiAgICAgICAgfSlcbiAgICAgICk7XG4gICAgfSksIChuLnBvc3RFdmVudCB8fCBwZSkoZSwgbi5wYXJhbXMpO1xuICB9LCBuKS5maW5hbGx5KHMpO1xufVxuZnVuY3Rpb24gSShlKSB7XG4gIHJldHVybiBBZSgpKGUpO1xufVxuZnVuY3Rpb24gbGUoZSkge1xuICByZXR1cm4gSShcbiAgICBlLnJlcGxhY2UoL15bXj8jXSpbPyNdLywgXCJcIikucmVwbGFjZSgvWz8jXS9nLCBcIiZcIilcbiAgKTtcbn1cbmZ1bmN0aW9uIFplKCkge1xuICByZXR1cm4gbGUod2luZG93LmxvY2F0aW9uLmhyZWYpO1xufVxuZnVuY3Rpb24gemUoKSB7XG4gIGNvbnN0IGUgPSBwZXJmb3JtYW5jZS5nZXRFbnRyaWVzQnlUeXBlKFwibmF2aWdhdGlvblwiKVswXTtcbiAgaWYgKCFlKVxuICAgIHRocm93IG5ldyBFcnJvcihcIlVuYWJsZSB0byBnZXQgZmlyc3QgbmF2aWdhdGlvbiBlbnRyeS5cIik7XG4gIHJldHVybiBsZShlLm5hbWUpO1xufVxuY29uc3QgWGUgPSBcImxhdW5jaFBhcmFtc1wiO1xuZnVuY3Rpb24gWWUoKSB7XG4gIHJldHVybiBJKExlKFhlKSB8fCBcIlwiKTtcbn1cbmZ1bmN0aW9uIF9lKGUpIHtcbiAga2UoXCJsYXVuY2hQYXJhbXNcIiwgLyogQF9fUFVSRV9fICovICRlKGUpKTtcbn1cbmZ1bmN0aW9uIGJlKGUpIHtcbiAgcmV0dXJuIGUgaW5zdGFuY2VvZiBFcnJvciA/IGUubWVzc2FnZSArIChlLmNhdXNlID8gYFxuICAke2JlKGUuY2F1c2UpfWAgOiBcIlwiKSA6IEpTT04uc3RyaW5naWZ5KGUpO1xufVxuZnVuY3Rpb24gUWUoKSB7XG4gIGNvbnN0IGUgPSBbXTtcbiAgZm9yIChjb25zdCB0IG9mIFtcbiAgICAvLyBUcnkgdG8gcmV0cmlldmUgbGF1bmNoIHBhcmFtZXRlcnMgZnJvbSB0aGUgY3VycmVudCBsb2NhdGlvbi4gVGhpcyBtZXRob2QgY2FuIHJldHVyblxuICAgIC8vIG5vdGhpbmcgaW4gY2FzZSwgbG9jYXRpb24gd2FzIGNoYW5nZWQsIGFuZCB0aGVuIHRoZSBwYWdlIHdhcyByZWxvYWRlZC5cbiAgICBaZSxcbiAgICAvLyBUaGVuLCB0cnkgdXNpbmcgdGhlIGxvd2VyIGxldmVsIEFQSSAtIHdpbmRvdy5wZXJmb3JtYW5jZS5cbiAgICB6ZSxcbiAgICAvLyBGaW5hbGx5LCB0cnkgdG8gZXh0cmFjdCBsYXVuY2ggcGFyYW1ldGVycyBmcm9tIHRoZSBzZXNzaW9uIHN0b3JhZ2UuXG4gICAgWWVcbiAgXSlcbiAgICB0cnkge1xuICAgICAgY29uc3QgbiA9IHQoKTtcbiAgICAgIHJldHVybiBfZShuKSwgbjtcbiAgICB9IGNhdGNoIChuKSB7XG4gICAgICBlLnB1c2gobik7XG4gICAgfVxuICB0aHJvdyBuZXcgYihIZSwgW1xuICAgIFwiVW5hYmxlIHRvIHJldHJpZXZlIGxhdW5jaCBwYXJhbWV0ZXJzIGZyb20gYW55IGtub3duIHNvdXJjZS4gUGVyaGFwcywgeW91IGhhdmUgb3BlbmVkIHlvdXIgYXBwIG91dHNpZGUgVGVsZWdyYW0/XCIsXG4gICAgXCLwn5OWIFJlZmVyIHRvIGRvY3MgZm9yIG1vcmUgaW5mb3JtYXRpb246XCIsXG4gICAgXCJodHRwczovL2RvY3MudGVsZWdyYW0tbWluaS1hcHBzLmNvbS9wYWNrYWdlcy90ZWxlZ3JhbS1hcHBzLXNkay9lbnZpcm9ubWVudFwiLFxuICAgIFwiQ29sbGVjdGVkIGVycm9yczpcIixcbiAgICAuLi5lLm1hcCgodCkgPT4gYOKAlCAke2JlKHQpfWApXG4gIF0uam9pbihgXG5gKSk7XG59XG5mdW5jdGlvbiBfdChlKSB7XG4gIGlmIChlID09PSBcInNpbXBsZVwiKVxuICAgIHRyeSB7XG4gICAgICByZXR1cm4gUWUoKSwgITA7XG4gICAgfSBjYXRjaCB7XG4gICAgICByZXR1cm4gITE7XG4gICAgfVxuICByZXR1cm4gdy53aXRoRm4oYXN5bmMgKCkgPT4ge1xuICAgIGlmIChlZSh3aW5kb3cpKVxuICAgICAgcmV0dXJuICEwO1xuICAgIHRyeSB7XG4gICAgICByZXR1cm4gYXdhaXQgZmUoXCJ3ZWJfYXBwX3JlcXVlc3RfdGhlbWVcIiwgXCJ0aGVtZV9jaGFuZ2VkXCIsIHsgdGltZW91dDogMTAwIH0pLCAhMDtcbiAgICB9IGNhdGNoIHtcbiAgICAgIHJldHVybiAhMTtcbiAgICB9XG4gIH0sIGUpO1xufVxuZnVuY3Rpb24gayhlLCB0KSB7XG4gIHdpbmRvdy5kaXNwYXRjaEV2ZW50KG5ldyBNZXNzYWdlRXZlbnQoXCJtZXNzYWdlXCIsIHtcbiAgICBkYXRhOiBKU09OLnN0cmluZ2lmeSh7IGV2ZW50VHlwZTogZSwgZXZlbnREYXRhOiB0IH0pLFxuICAgIC8vIFdlIHNwZWNpZnkgd2luZG93LnBhcmVudCB0byBpbWl0YXRlIHRoZSBjYXNlLCB0aGUgcGFyZW50IGlmcmFtZSBzZW50IHVzIHRoaXMgZXZlbnQuXG4gICAgc291cmNlOiB3aW5kb3cucGFyZW50XG4gIH0pKTtcbn1cbmZ1bmN0aW9uIGV0KGUsIHQpIHtcbiAgaWYgKHR5cGVvZiB0ID09IFwic3RyaW5nXCIpXG4gICAgdHJ5IHtcbiAgICAgIGNvbnN0IHsgZXZlbnRUeXBlOiBuIH0gPSBZKCkodCk7XG4gICAgICBuID09PSBcIndlYl9hcHBfcmVxdWVzdF90aGVtZVwiICYmIGsoXCJ0aGVtZV9jaGFuZ2VkXCIsIHtcbiAgICAgICAgdGhlbWVfcGFyYW1zOiBKU09OLnBhcnNlKC8qIEBfX1BVUkVfXyAqLyBYKGUpKVxuICAgICAgfSksIG4gPT09IFwid2ViX2FwcF9yZXF1ZXN0X3ZpZXdwb3J0XCIgJiYgayhcInZpZXdwb3J0X2NoYW5nZWRcIiwge1xuICAgICAgICB3aWR0aDogd2luZG93LmlubmVyV2lkdGgsXG4gICAgICAgIGhlaWdodDogd2luZG93LmlubmVySGVpZ2h0LFxuICAgICAgICBpc19zdGF0ZV9zdGFibGU6ICEwLFxuICAgICAgICBpc19leHBhbmRlZDogITBcbiAgICAgIH0pO1xuICAgIH0gY2F0Y2gge1xuICAgIH1cbn1cbmZ1bmN0aW9uIGJ0KGUpIHtcbiAgdmFyIHI7XG4gIGNvbnN0IHQgPSB0eXBlb2YgZSA9PSBcInN0cmluZ1wiID8gSShlKSA6IGU7XG4gIF9lKHQpO1xuICBjb25zdCBuID0gKHIgPSB3aW5kb3cuVGVsZWdyYW1XZWJ2aWV3UHJveHkpID09IG51bGwgPyB2b2lkIDAgOiByLnBvc3RFdmVudDtcbiAgd2luZG93LlRlbGVncmFtV2Vidmlld1Byb3h5ID0ge1xuICAgIHBvc3RFdmVudChvLCBzKSB7XG4gICAgICBldCh0LnRoZW1lUGFyYW1zLCBKU09OLnN0cmluZ2lmeSh7IGV2ZW50VHlwZTogbywgZXZlbnREYXRhOiBzIH0pKSwgbiA9PSBudWxsIHx8IG4obywgcyk7XG4gICAgfVxuICB9LCBXKFwiRW52aXJvbm1lbnQgd2FzIG1vY2tlZCBieSB0aGUgbW9ja1RlbGVncmFtRW52IGZ1bmN0aW9uXCIpO1xufVxuZnVuY3Rpb24gZ3QoKSB7XG4gIFtcbiAgICBbXCJUZWxlZ3JhbUdhbWVQcm94eV9yZWNlaXZlRXZlbnRcIl0sXG4gICAgLy8gV2luZG93cyBQaG9uZS5cbiAgICBbXCJUZWxlZ3JhbUdhbWVQcm94eVwiLCBcInJlY2VpdmVFdmVudFwiXSxcbiAgICAvLyBEZXNrdG9wLlxuICAgIFtcIlRlbGVncmFtXCIsIFwiV2ViVmlld1wiLCBcInJlY2VpdmVFdmVudFwiXVxuICAgIC8vIEFuZHJvaWQgYW5kIGlPUy5cbiAgXS5mb3JFYWNoKChlKSA9PiB7XG4gICAgbGV0IHQgPSB3aW5kb3c7XG4gICAgZS5mb3JFYWNoKChuLCByLCBvKSA9PiB7XG4gICAgICBpZiAociA9PT0gby5sZW5ndGggLSAxKSB7XG4gICAgICAgIHRbbl0gPSBrO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG4gICAgICBuIGluIHQgfHwgKHRbbl0gPSB7fSksIHQgPSB0W25dO1xuICAgIH0pO1xuICB9KTtcbn1cbmZ1bmN0aW9uIHd0KCkge1xuICBbXCJUZWxlZ3JhbUdhbWVQcm94eV9yZWNlaXZlRXZlbnRcIiwgXCJUZWxlZ3JhbUdhbWVQcm94eVwiLCBcIlRlbGVncmFtXCJdLmZvckVhY2goKGUpID0+IHtcbiAgICBkZWxldGUgd2luZG93W2VdO1xuICB9KTtcbn1cbmZ1bmN0aW9uIGh0KGUsIHQsIG4pIHtcbiAgY2UoZSkudW5zdWIodCwgbik7XG59XG5mdW5jdGlvbiBkdChlLCB0KSB7XG4gIHJldHVybiBpZSgpLnN1YihlLCB0KTtcbn1cbmZ1bmN0aW9uIG10KGUsIHQpIHtcbiAgTi51bnN1YihlLCB0KTtcbn1cbmZ1bmN0aW9uIHR0KGUpIHtcbiAgcmV0dXJuICh7IHJlcV9pZDogdCB9KSA9PiB0ID09PSBlO1xufVxuZnVuY3Rpb24gSihlKSB7XG4gIHJldHVybiBlLnNwbGl0KFwiLlwiKS5tYXAoTnVtYmVyKTtcbn1cbmZ1bmN0aW9uIG50KGUsIHQpIHtcbiAgY29uc3QgbiA9IEooZSksIHIgPSBKKHQpLCBvID0gTWF0aC5tYXgobi5sZW5ndGgsIHIubGVuZ3RoKTtcbiAgZm9yIChsZXQgcyA9IDA7IHMgPCBvOyBzICs9IDEpIHtcbiAgICBjb25zdCBhID0gbltzXSB8fCAwLCBpID0gcltzXSB8fCAwO1xuICAgIGlmIChhICE9PSBpKVxuICAgICAgcmV0dXJuIGEgPiBpID8gMSA6IC0xO1xuICB9XG4gIHJldHVybiAwO1xufVxuZnVuY3Rpb24gcChlLCB0KSB7XG4gIHJldHVybiBudChlLCB0KSA8PSAwO1xufVxuZnVuY3Rpb24gQihlLCB0LCBuKSB7XG4gIGlmICh0eXBlb2YgbiA9PSBcInN0cmluZ1wiKSB7XG4gICAgaWYgKGUgPT09IFwid2ViX2FwcF9vcGVuX2xpbmtcIikge1xuICAgICAgaWYgKHQgPT09IFwidHJ5X2luc3RhbnRfdmlld1wiKVxuICAgICAgICByZXR1cm4gcChcIjYuNFwiLCBuKTtcbiAgICAgIGlmICh0ID09PSBcInRyeV9icm93c2VyXCIpXG4gICAgICAgIHJldHVybiBwKFwiNy42XCIsIG4pO1xuICAgIH1cbiAgICBpZiAoZSA9PT0gXCJ3ZWJfYXBwX3NldF9oZWFkZXJfY29sb3JcIiAmJiB0ID09PSBcImNvbG9yXCIpXG4gICAgICByZXR1cm4gcChcIjYuOVwiLCBuKTtcbiAgICBpZiAoZSA9PT0gXCJ3ZWJfYXBwX2Nsb3NlXCIgJiYgdCA9PT0gXCJyZXR1cm5fYmFja1wiKVxuICAgICAgcmV0dXJuIHAoXCI3LjZcIiwgbik7XG4gICAgaWYgKGUgPT09IFwid2ViX2FwcF9zZXR1cF9tYWluX2J1dHRvblwiICYmIHQgPT09IFwiaGFzX3NoaW5lX2VmZmVjdFwiKVxuICAgICAgcmV0dXJuIHAoXCI3LjEwXCIsIG4pO1xuICB9XG4gIHN3aXRjaCAoZSkge1xuICAgIGNhc2UgXCJ3ZWJfYXBwX29wZW5fdGdfbGlua1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX29wZW5faW52b2ljZVwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldHVwX2JhY2tfYnV0dG9uXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0X2JhY2tncm91bmRfY29sb3JcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXRfaGVhZGVyX2NvbG9yXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfdHJpZ2dlcl9oYXB0aWNfZmVlZGJhY2tcIjpcbiAgICAgIHJldHVybiBwKFwiNi4xXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX29wZW5fcG9wdXBcIjpcbiAgICAgIHJldHVybiBwKFwiNi4yXCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX2Nsb3NlX3NjYW5fcXJfcG9wdXBcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9vcGVuX3NjYW5fcXJfcG9wdXBcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZWFkX3RleHRfZnJvbV9jbGlwYm9hcmRcIjpcbiAgICAgIHJldHVybiBwKFwiNi40XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3N3aXRjaF9pbmxpbmVfcXVlcnlcIjpcbiAgICAgIHJldHVybiBwKFwiNi43XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX2ludm9rZV9jdXN0b21fbWV0aG9kXCI6XG4gICAgY2FzZSBcIndlYl9hcHBfcmVxdWVzdF93cml0ZV9hY2Nlc3NcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9yZXF1ZXN0X3Bob25lXCI6XG4gICAgICByZXR1cm4gcChcIjYuOVwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9zZXR1cF9zZXR0aW5nc19idXR0b25cIjpcbiAgICAgIHJldHVybiBwKFwiNi4xMFwiLCB0KTtcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV9nZXRfaW5mb1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X29wZW5fc2V0dGluZ3NcIjpcbiAgICBjYXNlIFwid2ViX2FwcF9iaW9tZXRyeV9yZXF1ZXN0X2FjY2Vzc1wiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X3JlcXVlc3RfYXV0aFwiOlxuICAgIGNhc2UgXCJ3ZWJfYXBwX2Jpb21ldHJ5X3VwZGF0ZV90b2tlblwiOlxuICAgICAgcmV0dXJuIHAoXCI3LjJcIiwgdCk7XG4gICAgY2FzZSBcIndlYl9hcHBfc2V0dXBfc3dpcGVfYmVoYXZpb3JcIjpcbiAgICAgIHJldHVybiBwKFwiNy43XCIsIHQpO1xuICAgIGNhc2UgXCJ3ZWJfYXBwX3NldHVwX3NlY29uZGFyeV9idXR0b25cIjpcbiAgICBjYXNlIFwid2ViX2FwcF9zZXRfYm90dG9tX2Jhcl9jb2xvclwiOlxuICAgICAgcmV0dXJuIHAoXCI3LjEwXCIsIHQpO1xuICAgIGRlZmF1bHQ6XG4gICAgICByZXR1cm4gW1xuICAgICAgICBcImlmcmFtZV9yZWFkeVwiLFxuICAgICAgICBcImlmcmFtZV93aWxsX3JlbG9hZFwiLFxuICAgICAgICBcIndlYl9hcHBfY2xvc2VcIixcbiAgICAgICAgXCJ3ZWJfYXBwX2RhdGFfc2VuZFwiLFxuICAgICAgICBcIndlYl9hcHBfZXhwYW5kXCIsXG4gICAgICAgIFwid2ViX2FwcF9vcGVuX2xpbmtcIixcbiAgICAgICAgXCJ3ZWJfYXBwX3JlYWR5XCIsXG4gICAgICAgIFwid2ViX2FwcF9yZXF1ZXN0X3RoZW1lXCIsXG4gICAgICAgIFwid2ViX2FwcF9yZXF1ZXN0X3ZpZXdwb3J0XCIsXG4gICAgICAgIFwid2ViX2FwcF9zZXR1cF9tYWluX2J1dHRvblwiLFxuICAgICAgICBcIndlYl9hcHBfc2V0dXBfY2xvc2luZ19iZWhhdmlvclwiXG4gICAgICBdLmluY2x1ZGVzKGUpO1xuICB9XG59XG5mdW5jdGlvbiBFdChlLCB0KSB7XG4gIHQgfHwgKHQgPSBcInN0cmljdFwiKTtcbiAgY29uc3QgbiA9IHR5cGVvZiB0ID09IFwiZnVuY3Rpb25cIiA/IHQgOiAocikgPT4ge1xuICAgIGNvbnN0IHsgbWV0aG9kOiBvLCB2ZXJzaW9uOiBzIH0gPSByO1xuICAgIGxldCBhLCBpO1xuICAgIGlmIChcInBhcmFtXCIgaW4gciA/IChhID0gYFBhcmFtZXRlciBcIiR7ci5wYXJhbX1cIiBvZiBcIiR7b31cIiBtZXRob2QgaXMgdW5zdXBwb3J0ZWQgaW4gTWluaSBBcHBzIHZlcnNpb24gJHtzfWAsIGkgPSBHZSkgOiAoYSA9IGBNZXRob2QgXCIke299XCIgaXMgdW5zdXBwb3J0ZWQgaW4gTWluaSBBcHBzIHZlcnNpb24gJHtzfWAsIGkgPSBCZSksIHQgPT09IFwic3RyaWN0XCIpXG4gICAgICB0aHJvdyBuZXcgYihpLCBhKTtcbiAgICByZXR1cm4gY29uc29sZS53YXJuKGEpO1xuICB9O1xuICByZXR1cm4gKHIsIG8pID0+IEIociwgZSkgPyBOZShvKSAmJiByID09PSBcIndlYl9hcHBfc2V0X2hlYWRlcl9jb2xvclwiICYmIFwiY29sb3JcIiBpbiBvICYmICFCKHIsIFwiY29sb3JcIiwgZSkgPyBuKHsgdmVyc2lvbjogZSwgbWV0aG9kOiByLCBwYXJhbTogXCJjb2xvclwiIH0pIDogcGUociwgbykgOiBuKHsgdmVyc2lvbjogZSwgbWV0aG9kOiByIH0pO1xufVxuZnVuY3Rpb24geXQoZSwgdCwgbiwgcikge1xuICByZXR1cm4gZmUoXCJ3ZWJfYXBwX2ludm9rZV9jdXN0b21fbWV0aG9kXCIsIFwiY3VzdG9tX21ldGhvZF9pbnZva2VkXCIsIHtcbiAgICAuLi5yIHx8IHt9LFxuICAgIHBhcmFtczogeyBtZXRob2Q6IGUsIHBhcmFtczogdCwgcmVxX2lkOiBuIH0sXG4gICAgY2FwdHVyZTogdHQobilcbiAgfSkudGhlbigoeyByZXN1bHQ6IG8sIGVycm9yOiBzIH0pID0+IHtcbiAgICBpZiAocylcbiAgICAgIHRocm93IG5ldyBiKEtlLCBzKTtcbiAgICByZXR1cm4gbztcbiAgfSk7XG59XG5mdW5jdGlvbiBydChlKSB7XG4gIGUudW5zdWJBbGwoKSwgZS5yZXNldCgpO1xufVxuZnVuY3Rpb24gdnQoKSB7XG4gIHZhciBlO1xuICAoZSA9IEMoKSkgPT0gbnVsbCB8fCBlKCksIFtcbiAgICAuLi5PYmplY3QudmFsdWVzKHkoKSksXG4gICAgeSxcbiAgICBOLFxuICAgIEMsXG4gICAgdWUsXG4gICAgYWVcbiAgXS5mb3JFYWNoKHJ0KTtcbn1cbmV4cG9ydCB7XG4gIGFlIGFzICRkZWJ1ZyxcbiAgdWUgYXMgJHRhcmdldE9yaWdpbixcbiAgdyBhcyBDYW5jZWxhYmxlUHJvbWlzZSxcbiAgbmUgYXMgRVJSX0FCT1JURUQsXG4gIHJlIGFzIEVSUl9DQU5DRUxFRCxcbiAgS2UgYXMgRVJSX0NVU1RPTV9NRVRIT0RfRVJSX1JFU1BPTlNFLFxuICBHZSBhcyBFUlJfTUVUSE9EX1BBUkFNRVRFUl9VTlNVUFBPUlRFRCxcbiAgQmUgYXMgRVJSX01FVEhPRF9VTlNVUFBPUlRFRCxcbiAgSGUgYXMgRVJSX1JFVFJJRVZFX0xQX0ZBSUxFRCxcbiAgb2UgYXMgRVJSX1RJTUVEX09VVCxcbiAgVmUgYXMgRVJSX1VOS05PV05fRU5WLFxuICBBIGFzIEVuaGFuY2VkUHJvbWlzZSxcbiAgYiBhcyBUeXBlZEVycm9yLFxuICB4IGFzIGFkZEV2ZW50TGlzdGVuZXIsXG4gIGN0IGFzIGNhbWVsVG9LZWJhYixcbiAgdXQgYXMgY2FtZWxUb1NuYWtlLFxuICB0dCBhcyBjYXB0dXJlU2FtZVJlcSxcbiAgbnQgYXMgY29tcGFyZVZlcnNpb25zLFxuICBNIGFzIGNyZWF0ZUFib3J0RXJyb3IsXG4gIEwgYXMgY3JlYXRlQ2JDb2xsZWN0b3IsXG4gIE9lIGFzIGNyZWF0ZUxvZ2dlcixcbiAgRXQgYXMgY3JlYXRlUG9zdEV2ZW50LFxuICBPIGFzIGNyZWF0ZVR5cGVkRXJyb3JQcmVkaWNhdGUsXG4gIGd0IGFzIGRlZmluZUV2ZW50SGFuZGxlcnMsXG4gIGx0IGFzIGRlbGV0ZUNzc1ZhcixcbiAgayBhcyBlbWl0TWluaUFwcHNFdmVudCxcbiAgTGUgYXMgZ2V0U3RvcmFnZVZhbHVlLFxuICBlZSBhcyBoYXNXZWJ2aWV3UHJveHksXG4gIHl0IGFzIGludm9rZUN1c3RvbU1ldGhvZCxcbiAgc3QgYXMgaXNBYm9ydEVycm9yLFxuICBhdCBhcyBpc0NhbmNlbGVkRXJyb3IsXG4gIERlIGFzIGlzSWZyYW1lLFxuICBfdCBhcyBpc1RNQSxcbiAgb3QgYXMgaXNUaW1lb3V0RXJyb3IsXG4gIGJ0IGFzIG1vY2tUZWxlZ3JhbUVudixcbiAgaHQgYXMgb2ZmLFxuICBKZSBhcyBvbixcbiAgcGUgYXMgcG9zdEV2ZW50LFxuICB3dCBhcyByZW1vdmVFdmVudEhhbmRsZXJzLFxuICBmZSBhcyByZXF1ZXN0LFxuICB2dCBhcyByZXNldFBhY2thZ2VTdGF0ZSxcbiAgUWUgYXMgcmV0cmlldmVMYXVuY2hQYXJhbXMsXG4gIGZ0IGFzIHNldENzc1ZhcixcbiAga2UgYXMgc2V0U3RvcmFnZVZhbHVlLFxuICBpdCBhcyBzbGVlcCxcbiAgcHQgYXMgc25ha2VUb0NhbWVsLFxuICBkdCBhcyBzdWJzY3JpYmUsXG4gIEIgYXMgc3VwcG9ydHMsXG4gIG10IGFzIHVuc3Vic2NyaWJlXG59O1xuLy8jIHNvdXJjZU1hcHBpbmdVUkw9aW5kZXguanMubWFwXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(ssr)/./node_modules/@telegram-apps/bridge/dist/index.js\n");

/***/ })

};
;